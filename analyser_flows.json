[{"id":"ee85905d.ce5be","type":"tab","label":"Dashborad Config","disabled":false,"info":""},{"id":"df93d689.dd9628","type":"tab","label":"Set Parameter on AD5933","disabled":false,"info":""},{"id":"f9eacf4c.67f6a","type":"tab","label":"Run Measurement","disabled":false,"info":""},{"id":"4ee8fc4c.6ba204","type":"tab","label":"Dash Output","disabled":false,"info":""},{"id":"2ce79d0a.1887b2","type":"tab","label":"Store and Send Data","disabled":false,"info":""},{"id":"d05d0a8e.8eb938","type":"tab","label":"Dash. Manual","disabled":false,"info":""},{"id":"1ecd3a9e.dc5bfd","type":"mqtt-broker","name":"MQTT host","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"SOM","birthQos":"0","birthPayload":"TelePi comms up","closeTopic":"EOM","closePayload":"TelePi shutting down","willTopic":"EOM","willQos":"0","willPayload":"TelePi Comms Failure"},{"id":"ed34cce4.40fb7","type":"ui_tab","name":"Configuration","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"4172206f.b5555","type":"ui_tab","name":"Output","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"63149fe.c5c946","type":"ui_tab","name":"Manual","icon":"dashboard","order":4,"disabled":false,"hidden":false},{"id":"aec76d8a.f7d2d","type":"ui_tab","name":"Set Parameter","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"b823ab41.e30858","type":"ui_spacer","name":"spacer","group":"eafb9e57.c0cc7","order":1,"width":1,"height":1},{"id":"1eab91c2.5a49ee","type":"ui_spacer","name":"spacer","group":"eafb9e57.c0cc7","order":8,"width":1,"height":1},{"id":"562a47e1.ee31f8","type":"ui_spacer","name":"spacer","group":"eafb9e57.c0cc7","order":16,"width":1,"height":1},{"id":"d681333c.2b016","type":"ui_spacer","name":"spacer","group":"eafb9e57.c0cc7","order":24,"width":1,"height":1},{"id":"f796d2ee.8435d","type":"ui_spacer","name":"spacer","group":"eafb9e57.c0cc7","order":32,"width":1,"height":1},{"id":"bc0f953a.74b918","type":"ui_spacer","name":"spacer","group":"eafb9e57.c0cc7","order":40,"width":1,"height":1},{"id":"ffc1aa9d.ac4028","type":"ui_group","name":"Config. impdanz analyser","tab":"ed34cce4.40fb7","order":3,"disp":true,"width":"8","collapse":false},{"id":"eafb9e57.c0cc7","type":"ui_group","name":"Define 24 well microtiter plate","tab":"ed34cce4.40fb7","order":2,"disp":true,"width":"8","collapse":false},{"id":"94852fe6.33d6c","type":"ui_group","name":"Infos, Reset and Start","tab":"ed34cce4.40fb7","order":4,"disp":true,"width":"8","collapse":false},{"id":"3ad81bc4.ceb334","type":"ui_group","name":"General","tab":"ed34cce4.40fb7","order":1,"disp":true,"width":"8","collapse":false},{"id":"671ea14d.aec49","type":"ui_group","name":"Group 1","tab":"aec76d8a.f7d2d","order":1,"disp":false,"width":"30","collapse":false},{"id":"66cba542.37c96c","type":"ui_group","name":"Standard","tab":"63149fe.c5c946","order":1,"disp":false,"width":"6","collapse":false},{"id":"ec5469ff.470da8","type":"ui_group","name":"Stop measurement","tab":"4172206f.b5555","order":1,"disp":false,"width":"30","collapse":false},{"id":"28ec3aa9.aa3626","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#4B7930","value":"#4B7930","edited":false},"page-titlebar-backgroundColor":{"value":"#4B7930","edited":false},"page-backgroundColor":{"value":"#ffffff","edited":true},"page-sidebar-backgroundColor":{"value":"#333333","edited":false},"group-textColor":{"value":"#6db046","edited":false},"group-borderColor":{"value":"#d7d6e6","edited":true},"group-backgroundColor":{"value":"#f5f5ff","edited":true},"widget-textColor":{"value":"#080808","edited":true},"widget-backgroundColor":{"value":"#4b7930","edited":false},"widget-borderColor":{"value":"#f2f2fd","edited":true},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"7e401b58.d30c44","type":"comment","z":"ee85905d.ce5be","name":"FREQUENCY INCREMENT","info":"","x":220,"y":1820,"wires":[]},{"id":"e8feb48b.5f8af8","type":"comment","z":"ee85905d.ce5be","name":"NUMBER OF INCREMENTS","info":"","x":220,"y":1940,"wires":[]},{"id":"c68c9ba.8ce7968","type":"comment","z":"ee85905d.ce5be","name":"dash inputs:","info":"","x":90,"y":20,"wires":[]},{"id":"ec3aa226.1b20c","type":"comment","z":"ee85905d.ce5be","name":"Dach outputs:","info":"","x":1810,"y":80,"wires":[]},{"id":"86783332.9fd5f","type":"comment","z":"ee85905d.ce5be","name":"list (or csv) of measerment per well","info":"","x":1880,"y":180,"wires":[]},{"id":"9c002dec.e913c","type":"comment","z":"ee85905d.ce5be","name":"Fehler rÃ¼ckmeldung","info":"","x":1830,"y":220,"wires":[]},{"id":"e53689fe.b7fde8","type":"comment","z":"ee85905d.ce5be","name":"SEND DATA OVER MQTT","info":"timestamp:\nwell:\nfreq:\nimg:\nrel:\nphase:\nrepet frequnecy no: \nmeaserment name:","x":210,"y":340,"wires":[]},{"id":"5c47f64b.8695f8","type":"comment","z":"ee85905d.ce5be","name":"STORE ON USB STICK","info":"","x":210,"y":500,"wires":[]},{"id":"5f518e03.0d9df","type":"comment","z":"ee85905d.ce5be","name":"grafik","info":"","x":1790,"y":340,"wires":[]},{"id":"f4ad5975.bf0eb8","type":"comment","z":"ee85905d.ce5be","name":"Start measermnet","info":"","x":110,"y":4260,"wires":[]},{"id":"99d7b5af.70ab38","type":"comment","z":"ee85905d.ce5be","name":"calibration with first measurement","info":"","x":230,"y":1060,"wires":[]},{"id":"969b3677.3bbb08","type":"comment","z":"ee85905d.ce5be","name":"24 Well deffinition","info":"","x":120,"y":3560,"wires":[]},{"id":"9c47badc.7143d8","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"24well","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1560,"y":3831,"wires":[[]]},{"id":"9321e9f7.a6e588","type":"comment","z":"ee85905d.ce5be","name":"singel or 24well","info":"","x":180,"y":1220,"wires":[]},{"id":"70a8ef83.fd8d","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"{\"group\":{\"hide\":\"Configuration_Define_24_well_microtiter_plate\"}}","tot":"json"},{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"{\"group\":{\"show\":\"Configuration_Define_24_well_microtiter_plate\"}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":1300,"wires":[["420edb6b.1e3904"]]},{"id":"ba837647.69bea8","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"singlewell","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":1260,"wires":[[]]},{"id":"c347ab9d.5c44b8","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":150,"y":1320,"wires":[["7df63116.948fd"]]},{"id":"40cf3a66.6f7d84","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\nif (msg.payload > 1000){\n    msg1.payload = \"Maximum frequency increment is 1000 Hz!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else if (msg.payload < 0.1 ){\n    msg1.payload = \"Frequency increment can not be lower than 0.1Hz!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n        }else{\n            msg2.payload = Math.round(msg.payload);\n            return [msg2, null];\n        }\n}\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":580,"y":1860,"wires":[["8f32ca52.086228"],["2d99ee8c.4dde42","98a2d7f.c378a28"]]},{"id":"8f32ca52.086228","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"freqinc","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":1820,"wires":[[]]},{"id":"98a2d7f.c378a28","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nmsg.topic = \"init\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":940,"y":1860,"wires":[["daf8a718.f050b8"]]},{"id":"94147734.9fafc8","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\nif (msg.payload > 511){\n    msg1.payload = \"Maximum of increments is 511!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else if (msg.payload < 0){\n    msg1.payload = \"Number of increments can not be lower than 0!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n        }else{\n            msg2.payload = Math.round(msg.payload);\n            return [msg2, null];\n        }\n}\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":580,"y":1980,"wires":[["35509cb4.93ec94"],["f8a0437c.00dc1","672bc556.4fcd0c"]]},{"id":"35509cb4.93ec94","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"nufreqinc","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":1940,"wires":[[]]},{"id":"672bc556.4fcd0c","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nmsg.topic = \"init\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":940,"y":1980,"wires":[["d148a8ec.8143a8"]]},{"id":"d8aec8e4.bc3c08","type":"comment","z":"ee85905d.ce5be","name":"MULTIPLIER  of NUMBER OF SETTLING TIME CYCLES ","info":"","x":310,"y":2300,"wires":[]},{"id":"16deb086.d1bc6f","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"multicycles","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":2360,"wires":[[]]},{"id":"96e8e7e1.c8e488","type":"comment","z":"ee85905d.ce5be","name":"START FREQUENCY","info":"","x":200,"y":1700,"wires":[]},{"id":"70a41f2b.78175","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\nif (msg.payload > 100){\n    msg1.payload = \"Start frequency can not be higher than 100 kHz!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else if (msg.payload < 1){\n    msg1.payload = \"Start frequency can not be lower than 1 kHz\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n        }else{\n            msg2.payload = Math.round(msg.payload*1000);\n            return [msg2, null];\n        }\n}\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":580,"y":1740,"wires":[["4af023e7.b86b7c"],["c9d5cd94.c834","a4323e4e.8af13"]]},{"id":"4af023e7.b86b7c","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"startfreq","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":1700,"wires":[[]]},{"id":"a4323e4e.8af13","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nmsg.topic = \"init\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":940,"y":1740,"wires":[["7338d780.ee5028"]]},{"id":"61cb2457.9eaedc","type":"comment","z":"ee85905d.ce5be","name":"NUMBER OF SETTLING TIME CYCLES ","info":"","x":260,"y":2180,"wires":[]},{"id":"68183bba.f88164","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\n    if (msg.payload > 511){\n        msg1.payload = \"Maximum settling time cycles is 511!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n    }else if (msg.payload < 5){\n        msg1.payload = \"Settling time cycles should be at least 5!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n    }else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n        }else{\n            msg2.payload = Math.round(msg.payload);\n            return [msg2, null];\n        }\n    }\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":580,"y":2220,"wires":[["ce336bc5.4ac418"],["44a73df1.73fc24","2cd5474d.55d2b8"]]},{"id":"ce336bc5.4ac418","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"cylces","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":2180,"wires":[[]]},{"id":"2cd5474d.55d2b8","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":940,"y":2220,"wires":[["ed1e74b2.3e3598"]]},{"id":"2b1d47ad.010248","type":"comment","z":"ee85905d.ce5be","name":"NUMER OF REPEAT FREQUENCY","info":"","x":240,"y":2060,"wires":[]},{"id":"b0f4b11b.effc5","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\n    if (msg.payload > 20){\n        msg1.payload = \"Please not more than 20 repeats!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n    }else if (msg.payload < 0){\n        msg1.payload = \"Numper of reapeat frequency can not be lower than 0!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];   \n    }else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n            \n        }else{\n            msg2.payload = Math.round(msg.payload);\n            return [msg2, null];\n    }\n}\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":580,"y":2100,"wires":[["51b23294.e35bac"],["ab5c0882.2cf0a8","eb6c3c23.198a6"]]},{"id":"51b23294.e35bac","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"repfreq","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":2060,"wires":[[]]},{"id":"eb6c3c23.198a6","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nmsg.topic = \"init\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":940,"y":2100,"wires":[["5b44ea31.d4b9b4"]]},{"id":"6e4a6ee7.4e2a3","type":"comment","z":"ee85905d.ce5be","name":"Settings for analyer","info":"","x":110,"y":1660,"wires":[]},{"id":"f8f1cfbf.f7ffd","type":"comment","z":"ee85905d.ce5be","name":"GENERAL","info":"","x":80,"y":180,"wires":[]},{"id":"5f455578.99a2bc","type":"comment","z":"ee85905d.ce5be","name":"Pause betwees two measuremnets","info":"","x":240,"y":940,"wires":[]},{"id":"be67c2c5.b0176","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\nif (msg.payload > 1440){\n    msg1.payload = \"Max is 24 hours -> 1440 min\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else if (msg.payload < 0){\n    msg1.payload = \"Time is invalid. Minimum is 0 -> no delay\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n        }else{\n            msg2.payload = Math.round(msg.payload*100)/100;\n            return [msg2, null];\n        }\n}\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":700,"y":980,"wires":[["5a11d875.ef0c58"],["ded2a5c6.62acc8"]]},{"id":"5a11d875.ef0c58","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"pausetime","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":940,"wires":[[]]},{"id":"3051c569.f5a38a","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nmsg.topic = \"init\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1040,"y":980,"wires":[["8395c66a.1d37f8"]]},{"id":"6fbca212.65517c","type":"comment","z":"ee85905d.ce5be","name":"NAME OF MEASUREMENT","info":"","x":220,"y":220,"wires":[]},{"id":"3cdcd81c.53ed78","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\nif (msg.payload.length > 50){\n    msg1.payload = \"Name is larger than 50 charachter\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else if (msg.payload.length < 0){\n    msg1.payload = \"Name is to short\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n}else {\n    if (msg.payload === null || msg.payload === \"\"){\n        msg2.payload = undefined;\n    }else{\n        msg2.payload = msg.payload\n    }\n    return [msg2, null];\n}\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":460,"y":260,"wires":[["33e85815.8c23a8","226084b5.e04d2c"],["5549acf.3b94154","5f3242d3.be046c"]]},{"id":"33e85815.8c23a8","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"name","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":220,"wires":[[]]},{"id":"5f3242d3.be046c","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nmsg.topic = \"init\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":820,"y":260,"wires":[["5ea807b9.8637e8"]]},{"id":"53055466.a014fc","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"calibration","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":1100,"wires":[[]]},{"id":"e61fe24.d01822","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":150,"y":1160,"wires":[["2d777123.7bfe4e"]]},{"id":"e6df5103.7f71c","type":"comment","z":"ee85905d.ce5be","name":"OUTPUT VOLTAGE RANGE","info":"","x":220,"y":2460,"wires":[]},{"id":"819a59ff.137308","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"outputvoltage","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":2500,"wires":[[]]},{"id":"f2e615fd.291d98","type":"comment","z":"ee85905d.ce5be","name":"INPUT PGA GAIN","info":"","x":190,"y":2620,"wires":[]},{"id":"cd03d838.c9a318","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"inputgain","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":2660,"wires":[[]]},{"id":"59f68fff.4eea3","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nif (global.get(\"startfreq\") !== undefined && global.get(\"freqinc\") !== undefined && global.get(\"nufreqinc\") !== undefined ){\n    startfreq = global.get(\"startfreq\");\n    freqinc = global.get(\"freqinc\");\n    nufreqinc = global.get(\"nufreqinc\");\n    if (nufreqinc === 0){\n        msg.payload = startfreq/1000\n    }else {\n        msg.payload = ((nufreqinc * freqinc) + startfreq)/1000;\n    }\n    msg1.payload = true\n}else{\n    msg.payload = \"NaN\"\n    msg1.payload = false\n}\nif (msg.payload > 100){\n    msg.color = \"red\";\n    msg1.payload = false\n}\nif (msg.topic === \"init\"){\n    msg.payload = \"NaN\"\n    msg1.payload = false\n}\nreturn [msg, msg1];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1400,"y":1780,"wires":[["d166dddb.717a8","2022b3e8.eaabbc"],["ae14aa05.58f328"]]},{"id":"e44094bb.e06128","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":1740,"wires":[["59f68fff.4eea3"]]},{"id":"a2e51e95.927f3","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":1780,"wires":[["59f68fff.4eea3"]]},{"id":"f2073d69.53213","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":1820,"wires":[["59f68fff.4eea3"]]},{"id":"f7852cd9.de4c7","type":"link out","z":"ee85905d.ce5be","name":"resetall","links":["5f5f61ae.0eb2c","ace6d496.9e7dd8","6389673d.521ab8","2ac5b207.65c07e","8f40ae26.5826b","7186934e.7ce35c","69e36cdd.7a5944","97314a96.7abf58","ab20a880.6cec18","a4da498c.7c72e8","47182cd1.ad74c4","6d4eedb1.0f8fe4","22278190.ad12ce","3cf6b789.ba4c78","a95c6671.183e28","fdc9fad0.c8f9a8","f65b63c0.7f364","f0d31b3f.572f48","ec6182b8.d4f68","308579bd.f50b36","5fc1b0af.7f304","15ba695f.3ab807","fec02117.54db3","2e755dc.832cea2","863e08c0.5b6958","2b4e72a.b38528e","8669144e.336f58","f0962f36.520b3","5af66e69.c2a5b"],"x":575,"y":4140,"wires":[]},{"id":"5f5f61ae.0eb2c","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":1740,"wires":[["7338d780.ee5028"]]},{"id":"ace6d496.9e7dd8","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":1860,"wires":[["daf8a718.f050b8"]]},{"id":"6389673d.521ab8","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":1980,"wires":[["d148a8ec.8143a8"]]},{"id":"d6be7fbf.91518","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nmsg.topic = \"init\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":4140,"wires":[["f7852cd9.de4c7"]]},{"id":"2ac5b207.65c07e","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":1235,"y":1860,"wires":[["59f68fff.4eea3"]]},{"id":"7186934e.7ce35c","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":2220,"wires":[["ed1e74b2.3e3598"]]},{"id":"ab20a880.6cec18","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":2100,"wires":[["5b44ea31.d4b9b4"]]},{"id":"47182cd1.ad74c4","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":2400,"wires":[["261d3f45.d7b88"]]},{"id":"261d3f45.d7b88","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":2400,"wires":[["efa4fecb.e46d6"]]},{"id":"6d4eedb1.0f8fe4","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":2560,"wires":[["888e83d7.1a078"]]},{"id":"888e83d7.1a078","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"2000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":2560,"wires":[["e991c11f.5b2ca"]]},{"id":"22278190.ad12ce","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":2720,"wires":[["8ec77049.4d872"]]},{"id":"8ec77049.4d872","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":2720,"wires":[["23aef615.cd0b6a"]]},{"id":"fdc9fad0.c8f9a8","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":260,"wires":[["5ea807b9.8637e8"]]},{"id":"f65b63c0.7f364","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":980,"wires":[["8395c66a.1d37f8"]]},{"id":"a6d401ab.30b67","type":"function","z":"ee85905d.ce5be","name":"","func":"if (global.get(\"cylces\") !== undefined && global.get(\"multicycles\") !== undefined){\n    cylces = global.get(\"cylces\");\n    multicycles = global.get(\"multicycles\");\n    msg.payload = (cylces * multicycles);\n}else {\n    msg.payload = \"NaN\"\n}\nif (msg.topic === \"init\"){\n    msg.payload = \"NaN\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1400,"y":2340,"wires":[["8f26fc06.f7d2e","8410ed08.9c212"]]},{"id":"fbedcfa4.425fe","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2300,"wires":[["a6d401ab.30b67"]]},{"id":"9f391184.62a94","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2340,"wires":[["a6d401ab.30b67"]]},{"id":"8f40ae26.5826b","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":1255,"y":2400,"wires":[["a6d401ab.30b67"]]},{"id":"4d029ae8.841c64","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"mqtt","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":340,"wires":[[]]},{"id":"68521201.53e3ac","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":150,"y":440,"wires":[["250ea612.2d6eea"]]},{"id":"f18a7681.6312e8","type":"switch","z":"ee85905d.ce5be","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":450,"y":380,"wires":[["496b44db.53016c"]]},{"id":"65c7810e.960d3","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (!msg.mqttCheck.connected){\n    msg.payload = \"No brocker found with IP: localhost, PORT: 1883\";\n    return msg;\n}else{\n    msg.payload = \"Broker found at IP: localhost, Port: 1883. Data will be send to sensorbase/impedanceanalyer/#\"\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":820,"y":380,"wires":[["28f37403.59d7cc"]]},{"id":"21f94d6d.d856d2","type":"function","z":"ee85905d.ce5be","name":"","func":"if (!msg.mqttCheck.connected){\n    msg.payload = false;\nmsg.topic = \"init\";\nreturn msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":820,"y":420,"wires":[["250ea612.2d6eea"]]},{"id":"efa5b807.a63878","type":"watch","z":"ee85905d.ce5be","name":"","files":"/dev/disk/by-label/","recursive":true,"x":190,"y":540,"wires":[["e51c56c2.d4b308"]]},{"id":"e9ee1b34.cfb5f8","type":"exec","z":"ee85905d.ce5be","command":"ls /dev/sd*","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":330,"y":580,"wires":[["2b75e4d0.0444ec","a5a6e9a.92f4418"],[],[]]},{"id":"c65210d3.f1ccf","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":160,"y":580,"wires":[["e9ee1b34.cfb5f8"]]},{"id":"512d0763.d8d458","type":"exec","z":"ee85905d.ce5be","command":"sudo file ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":820,"y":580,"wires":[["f8763fa9.4446e"],[],[]]},{"id":"2b75e4d0.0444ec","type":"split","z":"ee85905d.ce5be","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":true,"addname":"","x":500,"y":580,"wires":[["da6f347f.b73358"]]},{"id":"da6f347f.b73358","type":"function","z":"ee85905d.ce5be","name":"","func":"\nif(msg.payload !== \"/dev/sda\" && msg.payload !== \"\" && msg.payload !== \"/dev/sdb\"){\n    msg.dev = msg.payload;\n    msg.payload = msg.payload + \" -s\";\n    return msg;\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":660,"y":580,"wires":[["512d0763.d8d458"],[]]},{"id":"f8763fa9.4446e","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = msg.payload.split('label:');\nmsg.payload = msg.payload[1].replace(/['\"]+/g, '');\nmsg.payload = msg.payload.replace(/\\s/g, '');\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":160,"y":620,"wires":[["8bafac54.b6d03"]]},{"id":"8bafac54.b6d03","type":"function","z":"ee85905d.ce5be","name":"","func":"//msg.options = []\nvalue = msg.dev;\nkey = msg.payload;\nvar obj = {};\nobj[key] = value;\nmsg.options = obj;\n//msg.options.push(obj);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":620,"wires":[["39dad02b.97a9"]]},{"id":"39dad02b.97a9","type":"join","z":"ee85905d.ce5be","name":"","mode":"custom","build":"array","property":"options","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.1","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":490,"y":620,"wires":[["f8efcc07.8e72f"]]},{"id":"e51c56c2.d4b308","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = \"USB Drive detected: \"+msg.payload\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":420,"y":540,"wires":[["b80ee7bf.028498","e9ee1b34.cfb5f8"]]},{"id":"f8efcc07.8e72f","type":"function","z":"ee85905d.ce5be","name":"","func":"key = \"NO DRIVE SELECTED\";\nvar obj = {};\nobj[key] = false;\nmsg.options.unshift(obj);\nmsg.payload = false;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":660,"y":620,"wires":[["66d6ca48.492a14"]]},{"id":"a8f3e53f.57ca78","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":660,"wires":[["66d6ca48.492a14"]]},{"id":"243c1100.104f4","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"usbdrive","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":640,"wires":[[]]},{"id":"ec6182b8.d4f68","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":660,"wires":[["a8f3e53f.57ca78"]]},{"id":"8d8f637b.fe6dd","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nif (msg.topic === \"init\"){\n    msg.payload = \"NaN\"\n    msg1.payload = \"NaN\"\n}else if (global.get(\"startfreq\") !== undefined && global.get(\"freqinc\") !== undefined && global.get(\"nufreqinc\") !== undefined && global.get(\"cylces\") !== undefined && global.get(\"multicycles\") !== undefined){\n    startfreq = global.get(\"startfreq\");\n    freqinc = global.get(\"freqinc\");\n    nufreqinc = global.get(\"nufreqinc\");\n    cylces = global.get(\"cylces\");\n    multicycles = global.get(\"multicycles\");\n    cycletime = (cylces * multicycles);\n    if (global.get(\"repfreq\")){\n        repeat = global.get(\"repfreq\")+1;\n    }else {\n        repeat = 1;\n    }\n    \n    if (nufreqinc === 0){\n        msg.payload = Math.round((((1/(startfreq))*cycletime) * repeat)*1000)/1000\n    }else {\n        var array = [];\n        msg.payload = 0;\n        for (i = 0; i <= nufreqinc; i++){\n            freq = Math.round(1/((startfreq/1000000)+(freqinc/1000000*i)));\n            //msg.payload = Math.round(1/(startfreq/1000000)+(freqinc/1000000*i))/1000000;\n            //msg.payload = msg.paload + (((1/(startfreq+freqinc*i))*cycletime) * repeat)\n            msg.payload = Math.round(msg.payload + ((freq*cycletime) + 1500));\n        }\n        msg.payload = Math.round((msg.payload * repeat)/1000)/1000;\n    }\n    if (global.get(\"singlewell\")){\n        nuwell = 1\n    }else if (global.get(\"nuwell\") === undefined){\n        nuwell = 24 \n    }else {\n        nuwell = global.get(\"nuwell\")\n    }\n    msg1.payload = Math.round((msg.payload * nuwell) + 0.005);\n    if (msg1.payload < 1){\n        msg1.payload = \" < 1 \"\n    }\n}else {\n    msg.payload = \"NaN\"\n    msg1.payload = \"NaN\"\n}\nreturn [msg, msg1];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1400,"y":2000,"wires":[["abc17031.7e46a","726548a8.d9b028"],["4a6b027b.7b1f1c","7265bcb7.8b63a4"]]},{"id":"a5de8507.7b2c08","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2000,"wires":[["8d8f637b.fe6dd"]]},{"id":"9314643.b837298","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2040,"wires":[["8d8f637b.fe6dd"]]},{"id":"e7268097.ab04c","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2080,"wires":[["8d8f637b.fe6dd"]]},{"id":"308579bd.f50b36","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":1255,"y":2240,"wires":[["8d8f637b.fe6dd"]]},{"id":"b9ea7e04.07054","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":1920,"wires":[["8d8f637b.fe6dd"]]},{"id":"b5ea890.227b178","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":1960,"wires":[["8d8f637b.fe6dd"]]},{"id":"a6608e26.90d41","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2120,"wires":[["8d8f637b.fe6dd"]]},{"id":"ad2bb418.06a438","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"0,3","topic":"init","payload":"null","payloadType":"jsonata","x":150,"y":4180,"wires":[["d6be7fbf.91518"]]},{"id":"a5a6e9a.92f4418","type":"function","z":"ee85905d.ce5be","name":"","func":"if (msg.payload === \"\"){\nkey = \"NO DRIVE SELECTED\";\nvar obj = {};\nobj[key] = false;\nmsg.options = []\nmsg.options.unshift(obj);\nmsg.payload = false;\nreturn msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":680,"wires":[["66d6ca48.492a14"]]},{"id":"b5dd0722.92b6d8","type":"comment","z":"ee85905d.ce5be","name":"Reset all","info":"","x":80,"y":4100,"wires":[]},{"id":"36eede0b.37ea92","type":"comment","z":"ee85905d.ce5be","name":"no ad5933","info":"","x":1840,"y":260,"wires":[]},{"id":"848cb45d.057848","type":"function","z":"ee85905d.ce5be","name":"","func":"\nitem =msg.payload\nmsg.payload = Object.values(item).reduce((a, item) => a + item, 0);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1360,"y":3791,"wires":[["9d8d10c8.05ebe"]]},{"id":"9d8d10c8.05ebe","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"nuwell","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1560,"y":3780,"wires":[["ef03ad3c.7ee75"]]},{"id":"fec02117.54db3","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":3751,"wires":[["b4f9b7ec.dd3f18"]]},{"id":"f810ddc0.92a13","type":"change","z":"ee85905d.ce5be","name":"well1","rules":[{"t":"move","p":"payload","pt":"msg","to":"well1","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3611,"wires":[[]]},{"id":"801f88d3.7e78f8","type":"change","z":"ee85905d.ce5be","name":"well2","rules":[{"t":"move","p":"payload","pt":"msg","to":"well2","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3671,"wires":[[]]},{"id":"374f800f.3e40c","type":"change","z":"ee85905d.ce5be","name":"well3","rules":[{"t":"move","p":"payload","pt":"msg","to":"well3","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3611,"wires":[[]]},{"id":"3b7ea979.7be556","type":"change","z":"ee85905d.ce5be","name":"well5","rules":[{"t":"move","p":"payload","pt":"msg","to":"well5","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":3611,"wires":[[]]},{"id":"d2ac4b07.0d2be8","type":"change","z":"ee85905d.ce5be","name":"well4","rules":[{"t":"move","p":"payload","pt":"msg","to":"well4","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3671,"wires":[[]]},{"id":"56f0d0b6.f0e66","type":"change","z":"ee85905d.ce5be","name":"well6","rules":[{"t":"move","p":"payload","pt":"msg","to":"well6","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":3671,"wires":[[]]},{"id":"e389a6cf.c774d8","type":"change","z":"ee85905d.ce5be","name":"well7","rules":[{"t":"move","p":"payload","pt":"msg","to":"well7","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3731,"wires":[[]]},{"id":"7a7b339e.89c38c","type":"change","z":"ee85905d.ce5be","name":"well11","rules":[{"t":"move","p":"payload","pt":"msg","to":"well11","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":3731,"wires":[[]]},{"id":"a319b276.33bdd","type":"change","z":"ee85905d.ce5be","name":"well12","rules":[{"t":"move","p":"payload","pt":"msg","to":"well12","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":3791,"wires":[[]]},{"id":"5b42b304.e57a2c","type":"change","z":"ee85905d.ce5be","name":"well17","rules":[{"t":"move","p":"payload","pt":"msg","to":"well17","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":3851,"wires":[[]]},{"id":"e8bb4c21.d7a78","type":"change","z":"ee85905d.ce5be","name":"well18","rules":[{"t":"move","p":"payload","pt":"msg","to":"well18","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":3911,"wires":[[]]},{"id":"e179d8a5.1f82a8","type":"change","z":"ee85905d.ce5be","name":"well23","rules":[{"t":"move","p":"payload","pt":"msg","to":"well23","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":3971,"wires":[[]]},{"id":"8103f312.01c2a","type":"change","z":"ee85905d.ce5be","name":"well24","rules":[{"t":"move","p":"payload","pt":"msg","to":"well24","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1050,"y":4031,"wires":[[]]},{"id":"397312b2.d89f1e","type":"change","z":"ee85905d.ce5be","name":"well9","rules":[{"t":"move","p":"payload","pt":"msg","to":"well9","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3731,"wires":[[]]},{"id":"c00710f1.2f53b","type":"change","z":"ee85905d.ce5be","name":"well10","rules":[{"t":"move","p":"payload","pt":"msg","to":"well10","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3791,"wires":[[]]},{"id":"b5360a98.cfb298","type":"change","z":"ee85905d.ce5be","name":"well15","rules":[{"t":"move","p":"payload","pt":"msg","to":"well15","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3851,"wires":[[]]},{"id":"9e34cfd6.6da94","type":"change","z":"ee85905d.ce5be","name":"well16","rules":[{"t":"move","p":"payload","pt":"msg","to":"well16","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3911,"wires":[[]]},{"id":"2e42854.cb0d47a","type":"change","z":"ee85905d.ce5be","name":"well21","rules":[{"t":"move","p":"payload","pt":"msg","to":"well21","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":3971,"wires":[[]]},{"id":"920ec01e.2ac52","type":"change","z":"ee85905d.ce5be","name":"well22","rules":[{"t":"move","p":"payload","pt":"msg","to":"well22","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":4031,"wires":[[]]},{"id":"cf2beebf.b3715","type":"change","z":"ee85905d.ce5be","name":"well8","rules":[{"t":"move","p":"payload","pt":"msg","to":"well8","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3791,"wires":[[]]},{"id":"71aa5a59.ad0a54","type":"change","z":"ee85905d.ce5be","name":"well13","rules":[{"t":"move","p":"payload","pt":"msg","to":"well13","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3851,"wires":[[]]},{"id":"fb58da8b.b70988","type":"change","z":"ee85905d.ce5be","name":"well14","rules":[{"t":"move","p":"payload","pt":"msg","to":"well14","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3911,"wires":[[]]},{"id":"fe2d10e9.c17de","type":"change","z":"ee85905d.ce5be","name":"well19","rules":[{"t":"move","p":"payload","pt":"msg","to":"well19","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3971,"wires":[[]]},{"id":"b28bf770.49f318","type":"change","z":"ee85905d.ce5be","name":"well20","rules":[{"t":"move","p":"payload","pt":"msg","to":"well20","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":4031,"wires":[[]]},{"id":"35bbae19.a10392","type":"join","z":"ee85905d.ce5be","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.1","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1230,"y":3831,"wires":[["63f54514.9119ac"]]},{"id":"63f54514.9119ac","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = {};\nfor (i=1; i <= 24; i++ ){\n    key = \"well\" + i;\n    msg.payload[key] = global.get(key)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1360,"y":3831,"wires":[["848cb45d.057848","9c47badc.7143d8"]]},{"id":"ef03ad3c.7ee75","type":"link out","z":"ee85905d.ce5be","name":"update one measurement run","links":["67cfd225.ac452c"],"x":1715,"y":3791,"wires":[]},{"id":"67cfd225.ac452c","type":"link in","z":"ee85905d.ce5be","name":"","links":["ef03ad3c.7ee75"],"x":1055,"y":2160,"wires":[["8addf405.ab4c68"]]},{"id":"b4f9b7ec.dd3f18","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":150,"y":3791,"wires":[["1811abe0.743864"]]},{"id":"8addf405.ab4c68","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2160,"wires":[["8d8f637b.fe6dd"]]},{"id":"e223567b.9791c8","type":"link in","z":"ee85905d.ce5be","name":"","links":["fd45e89e.7e7f08"],"x":1055,"y":2200,"wires":[["34a35f1e.1508d"]]},{"id":"34a35f1e.1508d","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1190,"y":2200,"wires":[["8d8f637b.fe6dd"]]},{"id":"fd45e89e.7e7f08","type":"link out","z":"ee85905d.ce5be","name":"singlewell","links":["e223567b.9791c8"],"x":415,"y":1220,"wires":[]},{"id":"f912d2ce.d123b","type":"function","z":"ee85905d.ce5be","name":"","func":"if (global.get(\"usbdrive\")){\n    msg.payload = \"sudo mount \"+global.get(\"usbdrive\")+\" /home/pi/mnt -o uid=pi,gid=pi\";\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":200,"y":760,"wires":[["730c33d2.f7f61c","ebd54bad.7aefa8"]]},{"id":"730c33d2.f7f61c","type":"exec","z":"ee85905d.ce5be","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":370,"y":760,"wires":[["c8ef3450.29f1f8"],[],[]]},{"id":"414d27b8.5ac208","type":"comment","z":"ee85905d.ce5be","name":"check for mount, read, and write","info":"","x":270,"y":720,"wires":[]},{"id":"ef3bcf1e.09184","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":850,"y":680,"wires":[["f912d2ce.d123b"]]},{"id":"c8ef3450.29f1f8","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nmsg1.payload = \"test\"\nmsg1.filename = \"/home/pi/mnt/testreadwrite/test\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":540,"y":760,"wires":[["905aa09e.cf95f"]]},{"id":"905aa09e.cf95f","type":"file","z":"ee85905d.ce5be","name":"","filename":"","appendNewline":false,"createDir":true,"overwriteFile":"false","encoding":"none","x":690,"y":760,"wires":[["babae457.b1b978"]]},{"id":"ad6e4440.11a3a8","type":"exec","z":"ee85905d.ce5be","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":550,"y":820,"wires":[[],[],["82de450b.772c28"]]},{"id":"594b551.8f974ac","type":"function","z":"ee85905d.ce5be","name":"","func":"\nmsg.payload = \"sudo umount /home/pi/mnt\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":360,"y":820,"wires":[["ad6e4440.11a3a8"]]},{"id":"babae457.b1b978","type":"file","z":"ee85905d.ce5be","name":"","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"delete","encoding":"none","x":200,"y":820,"wires":[["594b551.8f974ac"]]},{"id":"1f402b03.4d1515","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nmsg1.payload = true;\nmsg1.topic = \"start\";\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":860,"wires":[["ebe2145c.1b6c58"]]},{"id":"ebd54bad.7aefa8","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":390,"y":860,"wires":[["1f402b03.4d1515"]]},{"id":"82de450b.772c28","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (msg.payload.code === 0){\n    msg1.payload = true\n    msg1.topic = \"end\"\n}else {\n    msg1.payload = false\n    msg1.topic = \"end\"\n}\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":820,"wires":[["ebe2145c.1b6c58"]]},{"id":"ebe2145c.1b6c58","type":"join","z":"ee85905d.ce5be","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"1","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":840,"wires":[["8c98d50.3f8ff28"]]},{"id":"8c98d50.3f8ff28","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 ={}\nvar msg2 = {}\nif (msg.payload.start && msg.payload.end){\n    msg1.payload = \"Succses: read write access to USB Drive\"\n    return msg1;\n}else{\n    msg1.payload = \"Unable to access (read and write) USB Drive. Please choose another USB Drive!\";\n    msg2.payload = false;\n    return [msg1, msg2];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":980,"y":840,"wires":[["485cbd29.2904e4"],["66d6ca48.492a14"]]},{"id":"c2c27975.2f4d38","type":"comment","z":"ee85905d.ce5be","name":"chrck if AD5933 is online or not","info":"","x":230,"y":1380,"wires":[]},{"id":"36fab7ee.9a6df8","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3","crontab":"","once":true,"onceDelay":"0.2","topic":"start","payload":"true","payloadType":"bool","x":160,"y":1460,"wires":[["d1336da.a264a9"]]},{"id":"7ffcd247.aade7c","type":"function","z":"ee85905d.ce5be","name":"","func":"if(msg.payload){\n    msg.payload = true;\n    msg.topic = \"end\";\n    return msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":1420,"wires":[["55298624.fb4ba8"]]},{"id":"55298624.fb4ba8","type":"join","z":"ee85905d.ce5be","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1440,"wires":[["fb7817fa.f1d928"]]},{"id":"ab266723.7b5f48","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":650,"y":1460,"wires":[["55298624.fb4ba8"]]},{"id":"fb7817fa.f1d928","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 ={}\nvar msg2 = {}\nif (msg.payload.start && msg.payload.end){\n    msg1.payload = \"online\"\n    msg1.color = \"green\";\n    msg2.payload = true;\n}else{\n    msg1.payload = \"offline\";\n    msg1.color = \"red\";\n    msg2.payload = false;\n}\nreturn [msg1, msg2];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1020,"y":1440,"wires":[["b59d5129.79c6d"],["fdbed786.ffd898","c9e3bca1.38268"]]},{"id":"d1336da.a264a9","type":"switch","z":"ee85905d.ce5be","name":"","property":"ad5933check","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":450,"y":1460,"wires":[["d56cffe0.0c764","ab266723.7b5f48"]]},{"id":"bacd63ce.9d9c8","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"ad5933check","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":1540,"wires":[[]]},{"id":"45a6bbe4.638164","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":1540,"wires":[["bacd63ce.9d9c8"]]},{"id":"fdbed786.ffd898","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"ad35933online","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1260,"y":1460,"wires":[[]]},{"id":"88c13128.cfac4","type":"function","z":"ee85905d.ce5be","name":"check all parameter","func":"var tableArray;\nvar theHTML = [];\ntheHTML.push(\n    '<table id=\"mytable\" cellspacing=\"0\">',\n    '<tr>', \n    '<th scope=\"col\" abbr=\"Configurations\" class=\"nobg\">Parameter</th>', \n    '<th scope=\"col\" abbr=\"Dual 1.8\">Value</th>',\n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Measuerment name:\", '</th>',\n    '<td>', global.get(\"name\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Send over MQTT:\", '</th>',\n    '<td>', global.get(\"mqtt\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"USB Drive selected:\", '</th>',\n    '<td>', global.get(\"usbdrive\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Calibration\", '</th>',\n    '<td>', global.get(\"calibration\"), '</td>', \n    '</tr>');\nif (global.get(\"pausetime\") === undefined){\n    global.set(\"pausetime\", 0)\n}\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Pause between measurement runs:\", '</th>',\n    '<td>', global.get(\"pausetime\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Start frequency:\", '</th>',\n    '<td>', global.get(\"startfreq\"),\" Hz\", '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Frequency increment\", '</th>',\n    '<td>', global.get(\"freqinc\"),\" Hz\", '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Number of frequency increments:\", '</th>',\n    '<td>', global.get(\"nufreqinc\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Total cycle time:\", '</th>',\n    '<td>', global.get(\"totalcycle\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Number of frequency repeats:\", '</th>',\n    '<td>', global.get(\"repfreq\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Peak to Peak output voltage:\", '</th>',\n    '<td>', global.get(\"outputvoltage\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"PGA input gain:\", '</th>',\n    '<td>', global.get(\"inputgain\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Feedback resistor RFB:\", '</th>',\n    '<td>', global.get(\"feedbackres\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Gain factor:\", '</th>',\n    '<td>', global.get(\"gainfactor\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Phase correction:\", '</th>',\n    '<td>', global.get(\"phasecorr\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Single sample\", '</th>',\n    '<td>', global.get(\"singlewell\"), '</td>', \n    '</tr>'); \nif (!global.get(\"singlewell\")){\n\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Number of active wells:\", '</th>',\n    '<td>', global.get(\"nuwell\"), '</td>', \n    '</tr>');\n    theHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Active wells:\", '</th>',\n    '<td>')\n    for (var key in global.get(\"24well\")){\n        theHTML.push(key+\": \"+global.get(\"24well\")[key], '<br>')\n    }\n    theHTML.push(\n    '</td>', \n    '</tr>');\n}\n\ntheHTML.push('</table>');\nmsg.payload = theHTML.join('')\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":390,"y":4540,"wires":[["aada6df0.b6fdb"]]},{"id":"ae14aa05.58f328","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"endfreq","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1600,"y":1800,"wires":[[]]},{"id":"fcb4b684.661e58","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (!global.get(\"usbdrive\") && !global.get(\"mqtt\")){\n    msg1.payload = \"No storage option selected. Please select either MQTT or a USB storage device or both.\";\n    return [msg1, null];\n}else {\n    return [null, msg]\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":4380,"wires":[["4b0b4786.4c35e8"],["8d0e87ae.a1bfd8"]]},{"id":"fdc03adf.5811b8","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (global.get(\"name\") === undefined || global.get(\"name\") === \"\"){\n    msg1.payload = \"No measurement name given. Please input a name Thanks!\";\n    return [msg1, null];\n}else {\n    return [null,msg]\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":4300,"wires":[["4b0b4786.4c35e8"],["4ec6a19b.9bc0a"]]},{"id":"8d0e87ae.a1bfd8","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (\n    global.get(\"startfreq\") === undefined ||\n    global.get(\"freqinc\") === undefined || \n    global.get(\"repfreq\") === undefined || \n    global.get(\"cylces\") === undefined || \n    global.get(\"feedbackres\") === undefined || \n    global.get(\"gainfactor\") === undefined || \n    global.get(\"phasecorr\") === undefined || \n    global.get(\"nufreqinc\") === undefined ){\n    msg1.payload = \"Please configure the impedance analyzer, Thanks\";\n    return [msg1, null];\n}else {\n    return [null, msg]\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":4420,"wires":[["4b0b4786.4c35e8"],["41da88ea.9da528"]]},{"id":"41da88ea.9da528","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (!global.get(\"endfreq\")){\n    msg1.payload = \"The end freqency is to high. Please lower the freqency increment, number of increments or the start freqency, Thanks!\";\n    return [msg1, null];\n}else if(global.get(\"endfreq\")){\n    return [null, msg]\n}else {\n    msg1.payload = \"Something went wrong. Please press reset all, Sorry!\";\n    return [msg1, null];\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":4460,"wires":[["4b0b4786.4c35e8"],["731a0567.6162bc"]]},{"id":"731a0567.6162bc","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (!global.get(\"singlewell\")){\nif (global.get(\"nuwell\") < 1){\n    msg1.payload = \"Please set at least on well, or select single sample!\";\n    return [msg1, null];\n}else{\n    return [null, msg]\n}\n}else{\n    return [null, msg]\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":4500,"wires":[["4b0b4786.4c35e8"],["88c13128.cfac4"]]},{"id":"2022b3e8.eaabbc","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"endfreq1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1600,"y":1720,"wires":[[]]},{"id":"726548a8.d9b028","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"sweeptime","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1610,"y":1940,"wires":[[]]},{"id":"7265bcb7.8b63a4","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"fullruntime","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1600,"y":2060,"wires":[[]]},{"id":"8410ed08.9c212","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"totalcycle","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1600,"y":2300,"wires":[[]]},{"id":"4ec6a19b.9bc0a","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {}\nif (global.get(\"ad35933online\") === undefined || !global.get(\"ad35933online\")){\n    msg1.payload = \"Impedance analyzer AD5933 not connected. Please check wires, Thanks!\";\n    return [msg1, null];\n}else {\n    return [null,msg]\n}","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":4340,"wires":[["4b0b4786.4c35e8"],["fcb4b684.661e58"]]},{"id":"61694471.fa0adc","type":"comment","z":"df93d689.dd9628","name":"write configs to analyser and check them","info":"","x":200,"y":40,"wires":[]},{"id":"1e0d27d2.521058","type":"comment","z":"df93d689.dd9628","name":"disable configuariton page","info":"","x":150,"y":1140,"wires":[]},{"id":"d3f58959.4fb508","type":"comment","z":"df93d689.dd9628","name":"anable Only read configuration page","info":"","x":440,"y":1140,"wires":[]},{"id":"a5d7b2d0.b91d7","type":"comment","z":"df93d689.dd9628","name":"Start measurement to next flow : run measurement","info":"","x":230,"y":1540,"wires":[]},{"id":"d7e8b17d.5a1bf","type":"link in","z":"df93d689.dd9628","name":"Input, Set Paramater","links":["d48dc552.0c6f78"],"x":55,"y":120,"wires":[["14342738.c1f6b9","b0070ac6.cef338"]]},{"id":"17696ac6.dbee45","type":"inject","z":"ee85905d.ce5be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":150,"y":60,"wires":[["cd8362fd.84a4f","b6bdf5e1.6c1c88"]]},{"id":"b6bdf5e1.6c1c88","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"{\"tabs\":{\"show\":[\"Output\",\"Configuration\"], \"hide\":[\"Set_Parameter\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":80,"wires":[["30cf912d.8e2d4e"]]},{"id":"cd8362fd.84a4f","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"Configuration","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":40,"wires":[["b2db1394.18973"]]},{"id":"b2db1394.18973","type":"delay","z":"ee85905d.ce5be","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":590,"y":40,"wires":[["30cf912d.8e2d4e"]]},{"id":"9bbe7b9a.871c48","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"ad5933check","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":1280,"wires":[[]]},{"id":"2966dfa2.42a8f","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":1280,"wires":[["9bbe7b9a.871c48"]]},{"id":"c2cbb046.6540c","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":1580,"wires":[["4aec1571.e5aefc"]]},{"id":"2537725f.6684ae","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"{\"tabs\":{\"hide\":[\"Configuration\"], \"show\":[\"Output\", \"Set_Parameter\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":1240,"wires":[["c8b91907.99bef8"]]},{"id":"2b7d7bb2.2f1b24","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"Output","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":1200,"wires":[["b7f09295.1d667"]]},{"id":"b7f09295.1d667","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":670,"y":1200,"wires":[["c8b91907.99bef8"]]},{"id":"d48dc552.0c6f78","type":"link out","z":"ee85905d.ce5be","name":"Start, Daschboard Config","links":["d7e8b17d.5a1bf"],"x":1195,"y":4540,"wires":[]},{"id":"7fc06f39.9d199","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"OK","fromt":"str","to":"true","tot":"bool"},{"t":"change","p":"payload","pt":"msg","from":"Cancel","fromt":"str","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":4540,"wires":[["c745a62b.2edeb8"]]},{"id":"c745a62b.2edeb8","type":"switch","z":"ee85905d.ce5be","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1050,"y":4540,"wires":[["d48dc552.0c6f78"]]},{"id":"1462314d.2d41cf","type":"function","z":"df93d689.dd9628","name":"Start frequency","func":"if (msg.payload !== undefined){\ninternalclock = 16776000\nmsg.payload = Math.round(((msg.payload/(internalclock/4))*Math.pow(2, 27)))\nreturn msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":220,"y":180,"wires":[["2b902d7d.aa2462"]]},{"id":"2b902d7d.aa2462","type":"function","z":"df93d689.dd9628","name":"","func":"stringhex = (msg.payload).toString(16);\n\nstringhex = stringhex.split('');\nlen = stringhex.length;\nrest = 6 - len;\n//zeroarray = Array.apply(null, new Array(len)).map(Number.prototype.valueOf,0);\nzeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\nstringhexarray = zeroarray.concat(stringhex);\n\nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nmsg1.payload = parseInt(\"0x\" + stringhexarray[0] + stringhexarray[1]);\nmsg2.payload = parseInt(\"0x\" + stringhexarray[2] + stringhexarray[3]);\nmsg3.payload = parseInt(\"0x\" + stringhexarray[4] + stringhexarray[5]);\nreturn [msg1,msg2,msg3];","outputs":3,"noerr":0,"initialize":"","finalize":"","x":540,"y":180,"wires":[["94df9842.779618"],["af6b9620.998d98"],["c14843f6.37588"]]},{"id":"94df9842.779618","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 130, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":140,"wires":[["a7951b54.7b54d8"]]},{"id":"af6b9620.998d98","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 131, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":180,"wires":[["22c80902.273fe6"]]},{"id":"c14843f6.37588","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 132, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":220,"wires":[["69ec7de9.c88234"]]},{"id":"14342738.c1f6b9","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"startfreq","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":140,"wires":[["1462314d.2d41cf"]]},{"id":"a7951b54.7b54d8","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":140,"wires":[["191bbe48.a9eab2"]]},{"id":"22c80902.273fe6","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set2","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":180,"wires":[["1c67692a.96b507"]]},{"id":"69ec7de9.c88234","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set3","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":220,"wires":[["8bc47035.bc001"]]},{"id":"20ed35dc.d986ea","type":"catch","z":"ee85905d.ce5be","name":"catch error of i2c in","scope":["d56cffe0.0c764"],"uncaught":false,"x":190,"y":1500,"wires":[["76d8fdbe.4a7dd4"]]},{"id":"76d8fdbe.4a7dd4","type":"debug","z":"ee85905d.ce5be","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":450,"y":1500,"wires":[]},{"id":"191bbe48.a9eab2","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":140,"wires":[["e6b4c6ba.4413a8"]]},{"id":"7d489dc9.58f414","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set1\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set1\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":140,"wires":[["40be1333.78b86c"]]},{"id":"1c67692a.96b507","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":180,"wires":[["9d65d21c.ddcee"]]},{"id":"8bc47035.bc001","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":220,"wires":[["58bd1630.00b748"]]},{"id":"40be1333.78b86c","type":"join","z":"df93d689.dd9628","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1670,"y":220,"wires":[["70bf2884.3031a8"]]},{"id":"c7a0f678.bf5438","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set2\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set2\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":180,"wires":[["40be1333.78b86c"]]},{"id":"e24bdabe.683648","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set3\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set3\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":220,"wires":[["40be1333.78b86c"]]},{"id":"e3bc0dbc.42197","type":"catch","z":"df93d689.dd9628","name":"Catch: startfreq 1-3 and 130 - 132","scope":["94df9842.779618","af6b9620.998d98","c14843f6.37588","96d0d5a0.ced228","f1b2143d.0f61e8","e2d86f0b.9261c","fd49cc53.a65bc","f5767ffe.9ad43","5a6f880d.2d95e8","8d8d46d5.b27568","e6b4c6ba.4413a8","9d65d21c.ddcee","58bd1630.00b748","b9ac677a.09d038","69d90e96.f20e2","d4885e0a.26372","288710d8.b6e2","5ab2f64e.faaba8","8a49c6f7.e822b8","74962686.921008","5fd2ee91.f0f57"],"uncaught":false,"x":270,"y":1680,"wires":[["12b29c68.ea6534"]]},{"id":"d7c6f514.8e0c68","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {};\n\n\nif (msg.payload === false){\n    msg1.payload = \"Something went wrong while writing the parameters to the AD5933, please check all lines and restart.\";\n    msg.payload = true;\n}else if (msg.error.message !== undefined){\n    msg1.payload = \"Could not reach AD5933, please check connection. Error message: \" + msg.error.message;\n    msg.payload = true;\n}else{\n    msg.payload = true;\n    msg1.payload = \"Undefined error\";\n}\nreturn [msg1, msg];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":640,"y":1720,"wires":[["1c017f4b.8563c1"],["d03f259c.d23808","2f901d22.d94de2"]]},{"id":"5ab72e67.18e96","type":"comment","z":"df93d689.dd9628","name":"stop the start when error","info":"","x":150,"y":1640,"wires":[]},{"id":"93591f45.a51f6","type":"link in","z":"df93d689.dd9628","name":"stop the start","links":["a0b29417.040b78","ae6989dd.2fc738","ce008263.cd773","d55eb14c.3dc51","e8e6e482.e5d0b8","fdd179ee.b64398"],"x":155,"y":1720,"wires":[["d7c6f514.8e0c68"]]},{"id":"b0070ac6.cef338","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"start","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":100,"wires":[["b4573d2a.c2b3b"]]},{"id":"b4573d2a.c2b3b","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1450,"y":100,"wires":[["40be1333.78b86c"]]},{"id":"70bf2884.3031a8","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 ={};\nvar msg2 = {};\nif (msg.payload.set1 && msg.payload.set2  && msg.payload.set3 && msg.payload.start){\n    msg1.payload = true;\n    msg1.topic = \"start\";\n    return [null,msg1];\n}else{\n    msg2.payload = false;\n    return [msg2,null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1820,"y":220,"wires":[["d55eb14c.3dc51"],["4e0fc6bb.7d5838","4bcf15e6.eec3fc"]]},{"id":"d55eb14c.3dc51","type":"link out","z":"df93d689.dd9628","name":"Error 1","links":["93591f45.a51f6"],"x":1955,"y":220,"wires":[]},{"id":"3f001b6f.2b2084","type":"function","z":"df93d689.dd9628","name":"Frequency Increment","func":"if (msg.payload !== undefined){\ninternalclock = 16776000\nmsg.payload = Math.round(((msg.payload/(internalclock/4))*Math.pow(2, 27)))\nreturn msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":240,"y":380,"wires":[["79e23c24.a53be4"]]},{"id":"79e23c24.a53be4","type":"function","z":"df93d689.dd9628","name":"","func":"stringhex = (msg.payload).toString(16);\nstringhex = stringhex.split('');\nlen = stringhex.length;\nrest = 6 - len;\n//zeroarray = Array.apply(null, new Array(len)).map(Number.prototype.valueOf,0);\nzeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\nstringhexarray = zeroarray.concat(stringhex);\n\nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nmsg1.payload = parseInt(\"0x\" + stringhexarray[0] + stringhexarray[1]);\nmsg2.payload = parseInt(\"0x\" + stringhexarray[2] + stringhexarray[3]);\nmsg3.payload = parseInt(\"0x\" + stringhexarray[4] + stringhexarray[5]);\nreturn [msg1,msg2,msg3];","outputs":3,"noerr":0,"initialize":"","finalize":"","x":540,"y":380,"wires":[["96d0d5a0.ced228"],["f1b2143d.0f61e8"],["e2d86f0b.9261c"]]},{"id":"96d0d5a0.ced228","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 133, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":340,"wires":[["96c89c74.a7fed"]]},{"id":"f1b2143d.0f61e8","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 134, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":380,"wires":[["9e15508e.06b6b"]]},{"id":"e2d86f0b.9261c","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 135, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":420,"wires":[["9b588b27.6f2e98"]]},{"id":"4e0fc6bb.7d5838","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"freqinc","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":340,"wires":[["3f001b6f.2b2084"]]},{"id":"96c89c74.a7fed","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":340,"wires":[["314ce919.0a8146"]]},{"id":"9e15508e.06b6b","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set2","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":380,"wires":[["dc5ef3ed.ffc1b"]]},{"id":"9b588b27.6f2e98","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set3","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":420,"wires":[["d7772621.d3dc78"]]},{"id":"314ce919.0a8146","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":340,"wires":[["b9ac677a.09d038"]]},{"id":"1bfc1ffd.55b7e","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set1\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set1\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":340,"wires":[["37649679.63278a"]]},{"id":"dc5ef3ed.ffc1b","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":380,"wires":[["69d90e96.f20e2"]]},{"id":"d7772621.d3dc78","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":420,"wires":[["d4885e0a.26372"]]},{"id":"37649679.63278a","type":"join","z":"df93d689.dd9628","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1670,"y":420,"wires":[["e02f8b30.249158"]]},{"id":"e9c3ea13.b690a8","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set2\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set2\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":380,"wires":[["37649679.63278a"]]},{"id":"8b30c2ab.a4729","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set3\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set3\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":420,"wires":[["37649679.63278a"]]},{"id":"4bcf15e6.eec3fc","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1450,"y":300,"wires":[["37649679.63278a"]]},{"id":"e02f8b30.249158","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 ={};\nvar msg2 = {};\nif (msg.payload.set1 && msg.payload.set2 && msg.payload.set3 && msg.payload.start){\n    msg1.payload = true;\n    msg1.topic = \"start\";\n    return [null,msg1];\n}else{\n    msg2.payload = false;\n    return [msg2,null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1820,"y":420,"wires":[["a0b29417.040b78"],["29b04d39.9c60d2","a87c24a1.7c9a18"]]},{"id":"a0b29417.040b78","type":"link out","z":"df93d689.dd9628","name":"Error 2","links":["93591f45.a51f6"],"x":1955,"y":420,"wires":[]},{"id":"23efe73a.55d0f8","type":"function","z":"df93d689.dd9628","name":"number of Increment","func":"if (msg.payload !== undefined){\nmsg.payload = Math.round(msg.payload);\nreturn msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":240,"y":580,"wires":[["f77793d3.fa549"]]},{"id":"f77793d3.fa549","type":"function","z":"df93d689.dd9628","name":"","func":"stringhex = (msg.payload).toString(16);\nstringhex = stringhex.split('');\nlen = stringhex.length;\nrest = 4 - len;\n//zeroarray = Array.apply(null, new Array(len)).map(Number.prototype.valueOf,0);\nzeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\nstringhexarray = zeroarray.concat(stringhex);\n\nvar msg1 = {};\nvar msg2 = {};\nmsg1.payload = parseInt(\"0x\" + stringhexarray[0] + stringhexarray[1]);\nmsg2.payload = parseInt(\"0x\" + stringhexarray[2] + stringhexarray[3]);\nreturn [msg1,msg2];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":540,"y":580,"wires":[["fd49cc53.a65bc"],["f5767ffe.9ad43"]]},{"id":"fd49cc53.a65bc","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 136, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":540,"wires":[["c7c092c4.80d0d"]]},{"id":"f5767ffe.9ad43","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 137, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":580,"wires":[["1677f2f4.806efd"]]},{"id":"a87c24a1.7c9a18","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"nufreqinc","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":540,"wires":[["23efe73a.55d0f8"]]},{"id":"c7c092c4.80d0d","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":540,"wires":[["e0d9e664.54b348"]]},{"id":"1677f2f4.806efd","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set2","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":580,"wires":[["d93ce042.1d276"]]},{"id":"e0d9e664.54b348","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":540,"wires":[["288710d8.b6e2"]]},{"id":"191e48e4.532be7","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set1\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set1\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":540,"wires":[["83dc83e9.0b98a"]]},{"id":"d93ce042.1d276","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":580,"wires":[["5ab2f64e.faaba8"]]},{"id":"83dc83e9.0b98a","type":"join","z":"df93d689.dd9628","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1670,"y":580,"wires":[["69b6fc9c.a40934"]]},{"id":"bbd35d2d.9481a","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set2\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set2\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":580,"wires":[["83dc83e9.0b98a"]]},{"id":"29b04d39.9c60d2","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1450,"y":500,"wires":[["83dc83e9.0b98a"]]},{"id":"69b6fc9c.a40934","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 ={};\nvar msg2 = {};\nif (msg.payload.set1 && msg.payload.set2 && msg.payload.start){\n    msg1.payload = true;\n    msg1.topic = \"start\";\n    return [null,msg1];\n}else{\n    msg2.payload = false;\n    return [msg2,null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1820,"y":580,"wires":[["ae6989dd.2fc738"],["4091bd19.81c394","b1484ccd.a48b3"]]},{"id":"ae6989dd.2fc738","type":"link out","z":"df93d689.dd9628","name":"Error 3","links":["93591f45.a51f6"],"x":1955,"y":580,"wires":[]},{"id":"e169188d.bbe948","type":"function","z":"df93d689.dd9628","name":"Control.  Settling Time Cycles","func":"if (msg.payload !== undefined){\nmulticycles = global.get(\"multicycles\") || false;\nif (multicycles === 1){\n    msg.payload = Math.round(msg.payload);\n    return msg;\n}else if(multicycles === 2){\n    msg.payload = Math.round(msg.payload) + 512;\n    return msg;\n}else if(multicycles === 4){\n    msg.payload = Math.round(msg.payload) + 1536;\n    return msg;\n}\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":260,"y":740,"wires":[["bd42bc02.d5e01"]]},{"id":"bd42bc02.d5e01","type":"function","z":"df93d689.dd9628","name":"","func":"stringhex = (msg.payload).toString(16);\nstringhex = stringhex.split('');\nlen = stringhex.length;\nrest = 4 - len;\n//zeroarray = Array.apply(null, new Array(len)).map(Number.prototype.valueOf,0);\nzeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\nstringhexarray = zeroarray.concat(stringhex);\n\nvar msg1 = {};\nvar msg2 = {};\nmsg1.payload = parseInt(\"0x\" + stringhexarray[0] + stringhexarray[1]);\nmsg2.payload = parseInt(\"0x\" + stringhexarray[2] + stringhexarray[3]);\nreturn [msg1,msg2];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":540,"y":740,"wires":[["5a6f880d.2d95e8"],["8d8d46d5.b27568"]]},{"id":"5a6f880d.2d95e8","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 138, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":700,"wires":[["4c2c20e2.863d4"]]},{"id":"8d8d46d5.b27568","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 139, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":740,"wires":[["bddca881.b39768"]]},{"id":"b1484ccd.a48b3","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"cylces","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":700,"wires":[["e169188d.bbe948"]]},{"id":"4c2c20e2.863d4","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":700,"wires":[["c8d17e6c.54f15"]]},{"id":"bddca881.b39768","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set2","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":740,"wires":[["4b7e14b.cf1d0ec"]]},{"id":"c8d17e6c.54f15","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":700,"wires":[["8a49c6f7.e822b8"]]},{"id":"690f25ab.27377c","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set1\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set1\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":700,"wires":[["5162c87a.6311b8"]]},{"id":"4b7e14b.cf1d0ec","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":740,"wires":[["74962686.921008"]]},{"id":"5162c87a.6311b8","type":"join","z":"df93d689.dd9628","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1670,"y":740,"wires":[["4a1acb2e.e82794"]]},{"id":"9d923990.f0e278","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set2\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set2\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":740,"wires":[["5162c87a.6311b8"]]},{"id":"4091bd19.81c394","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1450,"y":660,"wires":[["5162c87a.6311b8"]]},{"id":"4a1acb2e.e82794","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 ={};\nvar msg2 = {};\nif (msg.payload.set1 && msg.payload.set2 && msg.payload.start){\n    msg1.payload = true;\n    msg1.topic = \"start\";\n    return [null,msg1];\n}else{\n    msg2.payload = false;\n    return [msg2,null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1820,"y":740,"wires":[["fdd179ee.b64398"],["ed933e89.eb766","35f776b.b93568a"]]},{"id":"fdd179ee.b64398","type":"link out","z":"df93d689.dd9628","name":"Error 4","links":["93591f45.a51f6"],"x":1955,"y":740,"wires":[]},{"id":"35f776b.b93568a","type":"function","z":"df93d689.dd9628","name":"Output voltage and input PGA gain","func":"outputvoltage = global.get(\"outputvoltage\") || false;\ninputgain = global.get(\"inputgain\") || false;\nvar msg1 = {}\nif (inputgain && outputvoltage){\n    msg1.payload = 160;\n    if (outputvoltage === 2000){\n        msg1.payload = msg1.payload + 0\n    }else if (outputvoltage === 1000){\n        msg1.payload = msg1.payload + 12\n    }else if (outputvoltage === 200){\n        msg1.payload = msg1.payload + 4\n    }else if (outputvoltage === 400){\n        msg1.payload = msg1.payload + 8\n    }\n    if (inputgain === 1){\n        msg1.payload = msg1.payload + 1\n    }else if(inputgain === 5){\n        msg1.payload = msg1.payload + 0\n    }\n    return msg1;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":280,"y":860,"wires":[["7187b2ac.ed15fc"]]},{"id":"7187b2ac.ed15fc","type":"function","z":"df93d689.dd9628","name":"","func":"stringhex = (msg.payload).toString(16);\nstringhex = stringhex.split('');\nlen = stringhex.length;\nrest = 2 - len;\n//zeroarray = Array.apply(null, new Array(len)).map(Number.prototype.valueOf,0);\nzeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\nstringhexarray = zeroarray.concat(stringhex);\n\nvar msg1 = {};\nmsg1.payload = parseInt(\"0x\" + stringhexarray[0] + stringhexarray[1]);\nreturn [msg1];","outputs":1,"noerr":0,"initialize":"","finalize":"","x":540,"y":860,"wires":[["88a2e3f5.6b9ba"]]},{"id":"88a2e3f5.6b9ba","type":"function","z":"df93d689.dd9628","name":"writetoi2c","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 128, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":720,"y":860,"wires":[["4906defd.b6d92"]]},{"id":"4906defd.b6d92","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"set1","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":860,"wires":[["46447adc.39a6d4"]]},{"id":"46447adc.39a6d4","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1110,"y":860,"wires":[["26ed40c7.e2f9e"]]},{"id":"58377427.73aa9c","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 = {}\nif (flow.get(\"set1\") === msg.payload){\n    msg1.payload = true;\n}else{\n    msg1.payload = false;\n}\nmsg1.topic = \"set1\"\nreturn msg1;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1480,"y":860,"wires":[["872774fe.731f48"]]},{"id":"872774fe.731f48","type":"join","z":"df93d689.dd9628","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"0.5","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1670,"y":860,"wires":[["b118bc43.14304"]]},{"id":"ed933e89.eb766","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1450,"y":820,"wires":[["872774fe.731f48"]]},{"id":"c9e3bca1.38268","type":"rbe","z":"ee85905d.ce5be","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":870,"y":1500,"wires":[["365d9b48.77a924"]]},{"id":"365d9b48.77a924","type":"switch","z":"ee85905d.ce5be","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1030,"y":1500,"wires":[["be0d3c.5433d2c8"]]},{"id":"be0d3c.5433d2c8","type":"function","z":"ee85905d.ce5be","name":"restet ad5933 with 0xA000","func":"stringhex = (40960).toString(16);\nstringhex = stringhex.split('');\nlen = stringhex.length;\nrest = 4 - len;\n//zeroarray = Array.apply(null, new Array(len)).map(Number.prototype.valueOf,0);\nzeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\nstringhexarray = zeroarray.concat(stringhex);\n\nvar msg1 = {};\nvar msg2 = {};\nmsg1.payload = parseInt(\"0x\" + stringhexarray[0] + stringhexarray[1]);\nmsg2.payload = parseInt(\"0x\" + stringhexarray[2] + stringhexarray[3]);\nreturn [msg1,msg2];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1260,"y":1500,"wires":[["a4f0ba87.0739f8"],["747433a1.0137ec"]]},{"id":"a4f0ba87.0739f8","type":"function","z":"ee85905d.ce5be","name":"write to control 128","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 128, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1510,"y":1480,"wires":[[]]},{"id":"747433a1.0137ec","type":"function","z":"ee85905d.ce5be","name":"write to control 128","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 129, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1510,"y":1520,"wires":[[]]},{"id":"b118bc43.14304","type":"function","z":"df93d689.dd9628","name":"","func":"var msg1 ={};\nvar msg2 = {};\nif (msg.payload.set1 && msg.payload.start){\n    msg1.payload = true;\n    msg1.topic = \"start\";\n    return [null,msg1];\n}else{\n    msg2.payload = false;\n    return [msg2,null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":200,"y":1040,"wires":[["ce008263.cd773"],["2b7d7bb2.2f1b24","2537725f.6684ae","2966dfa2.42a8f","c2cbb046.6540c","ad712d73.d121f","a1bd95ba.916478","312fe8f.beb2118"]]},{"id":"ce008263.cd773","type":"link out","z":"df93d689.dd9628","name":"Error 6","links":["93591f45.a51f6"],"x":355,"y":1040,"wires":[]},{"id":"4aec1571.e5aefc","type":"link out","z":"df93d689.dd9628","name":"Start Set Parameter","links":["b49f98e2.03dca8","d6e1da88.f500e8"],"x":595,"y":1580,"wires":[]},{"id":"b49f98e2.03dca8","type":"link in","z":"f9eacf4c.67f6a","name":"Input, Run Measuerment","links":["4aec1571.e5aefc"],"x":55,"y":240,"wires":[["b6d5865b.64f418"]]},{"id":"d3f98a10.086a68","type":"function","z":"df93d689.dd9628","name":"restet ad5933 with 0xA000","func":"stringhex = (40960).toString(16);\nstringhex = stringhex.split('');\nlen = stringhex.length;\nrest = 4 - len;\n//zeroarray = Array.apply(null, new Array(len)).map(Number.prototype.valueOf,0);\nzeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\nstringhexarray = zeroarray.concat(stringhex);\n\nvar msg1 = {};\nvar msg2 = {};\nmsg1.payload = parseInt(\"0x\" + stringhexarray[0] + stringhexarray[1]);\nmsg2.payload = parseInt(\"0x\" + stringhexarray[2] + stringhexarray[3]);\nreturn [msg1,msg2];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":1180,"y":1720,"wires":[["9ab443ec.83b65"],["3267fd1a.5d2d92"]]},{"id":"9ab443ec.83b65","type":"function","z":"df93d689.dd9628","name":"write to control 128","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 128, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":1700,"wires":[[]]},{"id":"3267fd1a.5d2d92","type":"function","z":"df93d689.dd9628","name":"write to control 128","func":"i2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\ni2c1.writeByteSync(13, 129, msg.payload);\ni2c1.closeSync();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1450,"y":1740,"wires":[[]]},{"id":"d03f259c.d23808","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":880,"y":1720,"wires":[["d3f98a10.086a68"]]},{"id":"f065d38c.0f36a","type":"catch","z":"df93d689.dd9628","name":"","scope":["d3f98a10.086a68"],"uncaught":false,"x":200,"y":1760,"wires":[[]]},{"id":"1c017f4b.8563c1","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":880,"y":1680,"wires":[["8b0dd50.1329a28"]]},{"id":"aecb1046.058db","type":"function","z":"df93d689.dd9628","name":"all parameter","func":"var tableArray;\nvar theHTML = [];\ntheHTML.push(\n    '<table id=\"mytable\" cellspacing=\"0\">',\n    '<tr>', \n    '<th scope=\"col\" abbr=\"Configurations\" class=\"nobg\">Parameter</th>', \n    '<th scope=\"col\" abbr=\"Dual 1.8\">Value</th>',\n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Measuerment name:\", '</th>',\n    '<td>', global.get(\"name\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Send over MQTT:\", '</th>',\n    '<td>', global.get(\"mqtt\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"USB Drive selected:\", '</th>',\n    '<td>', global.get(\"usbdrive\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Calibration\", '</th>',\n    '<td>', global.get(\"calibration\"), '</td>', \n    '</tr>');\nif (global.get(\"pausetime\") === undefined){\n    global.set(\"pausetime\", 0)\n}\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Pause between measurement runs:\", '</th>',\n    '<td>', global.get(\"pausetime\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Start frequency:\", '</th>',\n    '<td>', global.get(\"startfreq\"),\" Hz\", '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Frequency increment\", '</th>',\n    '<td>', global.get(\"freqinc\"),\" Hz\", '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Number of frequency increments:\", '</th>',\n    '<td>', global.get(\"nufreqinc\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Total cycle time:\", '</th>',\n    '<td>', global.get(\"totalcycle\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Number of frequency repeats:\", '</th>',\n    '<td>', global.get(\"repfreq\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Peak to Peak output voltage:\", '</th>',\n    '<td>', global.get(\"outputvoltage\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"PGA input gain:\", '</th>',\n    '<td>', global.get(\"inputgain\"), '</td>', \n    '</tr>');\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Single sample\", '</th>',\n    '<td>', global.get(\"singlewell\"), '</td>', \n    '</tr>'); \nif (!global.get(\"singlewell\")){\n\ntheHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Number of active wells:\", '</th>',\n    '<td>', global.get(\"nuwell\"), '</td>', \n    '</tr>');\n    theHTML.push(\n    '<tr>', \n    '<th scope=\"row\" class=\"spec\" align=\"right\">', \"Active wells:\", '</th>',\n    '<td>')\n    for (var key in global.get(\"24well\")){\n        theHTML.push(key+\": \"+global.get(\"24well\")[key], '<br>')\n    }\n    theHTML.push(\n    '</td>', \n    '</tr>');\n}\n\ntheHTML.push('</table>');\nmsg.template = theHTML.join('')\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":650,"y":1400,"wires":[["37752917.0570d6"]]},{"id":"ad712d73.d121f","type":"switch","z":"df93d689.dd9628","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":1400,"wires":[["aecb1046.058db"]]},{"id":"12b29c68.ea6534","type":"rbe","z":"df93d689.dd9628","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"_msgid","x":490,"y":1680,"wires":[["d7c6f514.8e0c68"]]},{"id":"5f813a40.c492a4","type":"function","z":"f9eacf4c.67f6a","name":"24well function","func":"//// init\n// function to create hex\nfunction makehex(num, leng) {\n    intout = leng/2;\n    stringhex = (num).toString(16);\n    stringhex = stringhex.split('');\n    len = stringhex.length;\n    rest = leng - len;\n    zeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\n    stringhexarray = zeroarray.concat(stringhex);\n    var out = []\n    for (z = 1; z <= intout; z++){\n        out.push(parseInt(\"0x\" + stringhexarray[(z*2)-2] + stringhexarray[(z*2)-1]));\n    }\n    return out\n}\n\n// sleep function\nconst sleep = (milliseconds) => {\n  return new Promise(resolve => setTimeout(resolve, milliseconds))\n}\n\n\n// test if bit is set or not\nfunction bit_test(num, bit){\n    return ((num>>bit) % 2 != 0)\n}\n\n// combine hex numbers as decimal to one decimal input: array of decimal hex numbers.\nfunction comphex(array){\n    result = 0\n    for (z = 1; z <= array.length; z++){\n        result = result + (array[z-1]*(Math.pow(256, (array.length-(z)))))\n    }\n    return result;\n}\n\n// function calc temperature\nfunction temper(rawtemp){\n    if (bit_test(rawtemp, 14)){\n        return (rawtemp - 16384)/32;\n    }else{\n        return rawtemp/32;\n    }\n}\n\n// bits needed to add to control register\noutputvoltage = global.get(\"outputvoltage\") || false;\ninputgain = global.get(\"inputgain\") || false;\nvar addtohex = 0;\nif (inputgain && outputvoltage){\n    if (outputvoltage === 2000){\n        addtohex = addtohex + 0\n    }else if (outputvoltage === 1000){\n        addtohex = addtohex + 12\n    }else if (outputvoltage === 200){\n        addtohex = addtohex + 4\n    }else if (outputvoltage === 400){\n        addtohex = addtohex + 8\n    }\n    if (inputgain === 1){\n        addtohex = addtohex + 1\n    }else if(inputgain === 5){\n        addtohex = addtohex + 0\n    }\n}\n\n//get/set variable \nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nstartfreq = global.get(\"startfreq\");\nfreqinc = global.get(\"freqinc\");\ncalibration = global.get(\"calibration\");\npausetime = (global.get(\"pausetime\")||0.0001)*60*1000;\nrepfreq =(global.get(\"repfreq\"))||0;\ngainfactor = global.get(\"gainfactor\");\nphasecorr = (global.get(\"phasecorr\"))||0;\n//only the relevant wells\nwell24 = global.get(\"24well\");\nfor (var item in well24){\n    if (!well24[item]){\n        delete well24[item];\n    }\n}\n\n// disable mux\nmsg1.payload = \"init\";\nawait node.send([msg1, null, null, null]);\nawait node.done();\n\n// start sync connection to ad5933\ni2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\n\n// get temperature\ni2c1.writeByteSync(13, 128, makehex(144 + addtohex, 2)[0]);\nwhile (!bit_test(i2c1.readByteSync(13, 143), 0)){\n    if(!global.get(\"stopmeasurement\")){\n        break;\n    }\n    await sleep (0.01);\n}\nvar temp = temper(comphex([i2c1.readByteSync(13, 146), i2c1.readByteSync(13, 147)]));\nif ( temp > 90 ){\n    global.set(\"stopmeasurement\", true);\n}\n\n//// measurement for calibration\nvar calibwells = {};\nif (calibration){\n    for (var well in well24){\n        // get temperature\n        i2c1.writeByteSync(13, 128, makehex(144 + addtohex, 2)[0]);\n        while (!bit_test(i2c1.readByteSync(13, 143), 0)){\n            if(!global.get(\"stopmeasurement\")){\n                break;\n            }\n            await sleep (0.01);\n        }\n        temp = temper(comphex([i2c1.readByteSync(13, 146), i2c1.readByteSync(13, 147)]));\n        if ( temp > 90 ){\n            global.set(\"stopmeasurement\", true);\n        }\n        //stand by mode\n        i2c1.writeByteSync(13, 128, makehex(176 + addtohex, 2)[0]);\n        await sleep (100);\n        // start sweep: 32 -> 0010XXXX -> start sweep\n        i2c1.writeByteSync(13, 128, makehex(16 + addtohex, 2)[0]);\n        await sleep (100);\n        i2c1.writeByteSync(13, 128, makehex(32 + addtohex, 2)[0]);\n        // do the sweep\n        k = 0;\n        array = []\n        while(!bit_test(i2c1.readByteSync(13, 143), 2)){\n            while (!bit_test(i2c1.readByteSync(13, 143), 1)){\n                null;\n            }\n            var rawreal = comphex([i2c1.readByteSync(13, 148), i2c1.readByteSync(13, 149)]);\n            var rawimag = comphex([i2c1.readByteSync(13, 150), i2c1.readByteSync(13, 151)]);\n            if (rawimag > 32767) {\n                rawimag = rawimag - 65536\n            }\n            if (rawreal > 32767) {\n                rawreal = rawreal - 65536\n            }\n            var radphase = Math.round(Math.atan2(rawimag, rawreal)*1000000)/1000000;\n            var degphase = Math.round(((radphase * 180/Math.PI) - phasecorr)*100)/100;\n            var rawmagnitude = Math.round(Math.sqrt(Math.pow(rawreal, 2)+Math.pow(rawimag, 2))*1000)/1000\n            var impedance = Math.round((1/(gainfactor * rawmagnitude))*1000)/1000\n            var real = Math.round(impedance * Math.cos(radphase - (phasecorr * Math.PI/180)))\n            var imag = Math.round(impedance * Math.sin(radphase - (phasecorr * Math.PI/180)))\n            array.push([ rawreal, rawimag, rawmagnitude, impedance, real, imag, degphase ]);\n            if (global.get(\"nufreqinc\") === 0){\n                break;\n            }\n            k++;\n            i2c1.writeByteSync(13, 128, makehex(48 + addtohex, 2)[0]);\n        }\n        calibwells[well] = array;\n    }\n}\n\n////Measurement \n//stop time\n//var starttime = 12341234;\n// start sweep: 32 -> 0010XXXX -> start sweep\nv = 1;\nwhile(!global.get(\"stopmeasurement\")){\n    // looping throught wells -> true\n    for (var well in well24){\n        msg1.payload = well;\n        await node.send([msg1, null, null, null]);\n        await node.done();\n        var chartreal = [];\n        var chartimag = [];\n        var chartimpe = [];\n        var chartmagn = [];\n        var chartfreq = [];\n        i2c1.writeByteSync(13, 128, makehex(144 + addtohex, 2)[0]);\n        while (!bit_test(i2c1.readByteSync(13, 143), 0)){\n            if(!global.get(\"stopmeasurement\")){\n                break;\n            }\n            await sleep (0.01);\n        }\n        temp = temper(comphex([i2c1.readByteSync(13, 146), i2c1.readByteSync(13, 147)]));\n        if ( temp > 90 ){\n            global.set(\"stopmeasurement\", true);\n        }\n        // Standby mode\n        i2c1.writeByteSync(13, 128, makehex(176 + addtohex, 2)[0]);\n        await sleep (40);\n        // Initialize with start frequency\n        i2c1.writeByteSync(13, 128, makehex(16 + addtohex, 2)[0]);\n        await sleep (40);\n        // Start frequency sweep\n        i2c1.writeByteSync(13, 128, makehex(32 + addtohex, 2)[0]);\n        // do the sweep\n        k = 0;\n        m = 0;\n        //wait till ad5933 is ready\n        while (bit_test(i2c1.readByteSync(13, 143), 2)){\n            await sleep (0.1);\n            if (global.get(\"stopmeasurement\")){\n                break;\n            }\n        }\n        while(!bit_test(i2c1.readByteSync(13, 143), 2)){\n            while (!bit_test(i2c1.readByteSync(13, 143), 1)){\n                await sleep (0.1);\n                if (global.get(\"stopmeasurement\")){\n                    break;\n                }\n            }\n            if (global.get(\"stopmeasurement\")){\n                break;\n            }\n            var rawreal = comphex([i2c1.readByteSync(13, 148), i2c1.readByteSync(13, 149)]);\n            var rawimag = comphex([i2c1.readByteSync(13, 150), i2c1.readByteSync(13, 151)]);\n            if (rawimag > 32767) {\n                rawimag = rawimag - 65536\n            }\n            if (rawreal > 32767) {\n                rawreal = rawreal - 65536\n            }\n            var radphase = Math.round(Math.atan2(rawimag, rawreal)*1000000)/1000000;\n            var degphase = Math.round(((radphase * 180/Math.PI) - phasecorr)*100)/100;\n            var freqnow = (startfreq+(freqinc*k));\n            var rawmagnitude = Math.round(Math.sqrt(Math.pow(rawreal, 2) + Math.pow(rawimag, 2))*1000)/1000;\n            var impedance = Math.round((1/(gainfactor * rawmagnitude))*1000)/1000;\n            var real = Math.round(impedance * Math.cos(radphase - (phasecorr * Math.PI/180)))\n            var imag = Math.round(impedance * Math.sin(radphase - (phasecorr * Math.PI/180)))\n            msg2.payload = {\"timestamp\": (+new Date() / 1000), \"freq\" : freqnow , \"rawreal\": rawreal, \"rawimag\": rawimag, \"rawmagnitude\": rawmagnitude, \"rawphase\": radphase, \"real\": real, \"imag\": imag, \"impedance\": impedance, \"degphase\": degphase, \"well\": parseInt(well.substring(4), 10), \"measurementrun\": v, \"temperature\": temp};\n            if (calibration){\n                rawreal = Math.round(rawreal  - calibwells[well][k][0]);\n                rawimag = Math.round(rawimag  - calibwells[well][k][1]);\n                msg2.payload.rawcalibreal = rawreal;\n                msg2.payload.rawcalibimag = rawimag;\n                rawmagnitude = Math.round(rawmagnitude - calibwells[well][k][2]);\n                msg2.payload.rawcalibmagnitude = rawmagnitude;\n                impedance = Math.round(impedance  - calibwells[well][k][3]);\n                msg2.payload.calibimpedance = impedance;\n                real = Math.round(real - calibwells[well][k][4]);\n                imag = Math.round(imag - calibwells[well][k][5]);\n                msg2.payload.calibreal = real;\n                msg2.payload.calibimag = imag;\n                degphase = Math.round(degphase - calibwells[well][k][6]);\n                msg2.payload.calibdegphase = degphase\n            }\n            msg2.topic = well;\n            await node.send([null, msg2, null, null]);\n            await node.done();\n            if (global.get(\"nufreqinc\") === 0){\n                break;\n            }\n            if (m < repfreq){\n                i2c1.writeByteSync(13, 128, makehex(64 + addtohex, 2)[0]);\n                m++;\n            }else{\n                chartreal.push(real);\n                chartimag.push(imag);\n                chartmagn.push(rawmagnitude);\n                chartimpe.push(impedance);\n                chartfreq.push(freqnow);\n                k++;\n                m = 0;\n                i2c1.writeByteSync(13, 128, makehex(48 + addtohex, 2)[0]);\n            }\n        }\n        if (global.get(\"stopmeasurement\")){\n            break;\n        }\n        // send chart data\n        var chart = [{\n        \"series\": [\"Real\",\"Imag\",\"Impe\", \"rawMagn\"],\n        \"data\": [ chartreal, chartimag, chartimpe, chartmagn ],\n        \"labels\": chartfreq,\n        }];\n        msg3.payload = chart;\n        msg3.toplabel = v + \". \" + well;\n        msg3.topic = well;\n        await node.send([null, null, msg3, null]);\n        await node.done();\n    }\n    //wait for given pausetime\n    for (a = 0; a < Math.round(pausetime/6); a++){\n        if (global.get(\"stopmeasurement\")){\n            break;\n        }\n        await sleep (6);\n    }\n    v++;\n}\n\n//power down mode\ni2c1.writeByteSync(13, 128, makehex(160, 2)[0]);\n\n//reset ad5933\n//...\n\n// disable mux\nmsg1.payload = \"init\";\ni2c1.closeSync();\nmsg4.payload = true;\nreturn [msg1,null,null,msg4];","outputs":4,"noerr":0,"initialize":"","finalize":"","x":680,"y":160,"wires":[["51778716.011498"],["d46789b4.bbd428"],["f941f6c4.abd878"],["59e83101.3afc2","a0138e69.bf196"]]},{"id":"d6616bc9.a6e108","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 40: EN mux1","pin":"40","set":true,"level":"1","freq":"","out":"out","x":570,"y":500,"wires":[]},{"id":"edd6c69e.88d188","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 38: S0 mux1","pin":"38","set":true,"level":"0","freq":"","out":"out","x":600,"y":540,"wires":[]},{"id":"740970a0.0976e","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 37: S1 mux1","pin":"37","set":true,"level":"0","freq":"","out":"out","x":640,"y":580,"wires":[]},{"id":"94877c1b.1c865","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 36: S2 mux1","pin":"36","set":true,"level":"0","freq":"","out":"out","x":680,"y":620,"wires":[]},{"id":"c867ac52.0b39b","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 35: S3 mux1","pin":"35","set":true,"level":"0","freq":"","out":"out","x":720,"y":660,"wires":[]},{"id":"92555f9d.d8edc","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 16: EN mux2","pin":"16","set":true,"level":"1","freq":"","out":"out","x":570,"y":720,"wires":[]},{"id":"472a056f.618b3c","type":"function","z":"f9eacf4c.67f6a","name":"","func":"var msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nvar msg5 = {};\nvar msg6 = {};\nvar msg7 = {};\nvar msg8 = {};\nvar msg9 = {};\nvar msg10 = {};\n\nswitch (msg.payload){\n    case \"well1\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 1;\n        msg9.payload = 0;\n        msg10.payload = 1;\n        break;\n    case \"well2\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 1;\n        msg9.payload = 1;\n        msg10.payload = 0;\n        break;\n    case \"well3\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 1;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well4\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 1;\n        msg4.payload = 0;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well5\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 1;\n        msg4.payload = 1;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well6\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 1;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well7\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 1;\n        msg9.payload = 0;\n        msg10.payload = 1;\n        break;\n    case \"well8\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 1;\n        msg9.payload = 1;\n        msg10.payload = 0;\n        break;\n    case \"well9\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 1;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well10\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 1;\n        msg4.payload = 0;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well11\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 1;\n        msg4.payload = 1;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well12\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 1;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well13\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 1;\n        break;\n    case \"well14\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 0;\n        msg9.payload = 1;\n        msg10.payload = 0;\n        break;\n    case \"well15\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well16\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well17\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 0;\n        msg4.payload = 1;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well18\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well19\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 1;\n        break;\n    case \"well20\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 1;\n        msg10.payload = 0;\n        break;\n    case \"well21\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well22\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well23\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 1;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"well24\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n\n    case \"test1\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 1;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"test2\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 0;\n        msg4.payload = 1;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"test3\":\n        msg1.payload = 0;\n        msg2.payload = 0;\n        msg3.payload = 1;\n        msg4.payload = 1;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"test4\":\n        msg1.payload = 0;\n        msg2.payload = 1;\n        msg3.payload = 1;\n        msg4.payload = 1;\n        msg5.payload = 1;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n    case \"test5\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 1;\n        msg10.payload = 1;\n        break;\n    case \"test6\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 0;\n        msg9.payload = 1;\n        msg10.payload = 1;\n        break;\n    case \"test7\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 0;\n        msg8.payload = 1;\n        msg9.payload = 1;\n        msg10.payload = 1;\n        break;\n    case \"test8\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 0;\n        msg7.payload = 1;\n        msg8.payload = 1;\n        msg9.payload = 1;\n        msg10.payload = 1;\n        break;\n    case \"init\":\n        msg1.payload = 1;\n        msg2.payload = 0;\n        msg3.payload = 0;\n        msg4.payload = 0;\n        msg5.payload = 0;\n        msg6.payload = 1;\n        msg7.payload = 0;\n        msg8.payload = 0;\n        msg9.payload = 0;\n        msg10.payload = 0;\n        break;\n};\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6, msg7, msg8, msg9, msg10];","outputs":10,"noerr":0,"initialize":"","finalize":"","x":280,"y":700,"wires":[["d6616bc9.a6e108"],["edd6c69e.88d188"],["740970a0.0976e"],["94877c1b.1c865"],["c867ac52.0b39b"],["92555f9d.d8edc"],["5a5d70ff.5de17"],["c1cd5fb9.b27ba"],["34879d5e.fb7822"],["51024349.40f3bc"]]},{"id":"5a5d70ff.5de17","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 15: S0 mux2","pin":"15","set":true,"level":"0","freq":"","out":"out","x":600,"y":760,"wires":[]},{"id":"c1cd5fb9.b27ba","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 13: S1 mux2","pin":"13","set":true,"level":"0","freq":"","out":"out","x":640,"y":800,"wires":[]},{"id":"34879d5e.fb7822","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 12: S2 mux2","pin":"12","set":true,"level":"0","freq":"","out":"out","x":680,"y":840,"wires":[]},{"id":"51024349.40f3bc","type":"rpi-gpio out","z":"f9eacf4c.67f6a","name":"Pin 11: S3 mux2","pin":"11","set":true,"level":"0","freq":"","out":"out","x":720,"y":880,"wires":[]},{"id":"431c904d.efdc8","type":"inject","z":"f9eacf4c.67f6a","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"0.3","topic":"","payload":"init","payloadType":"str","x":110,"y":660,"wires":[["472a056f.618b3c"]]},{"id":"b6d5865b.64f418","type":"function","z":"f9eacf4c.67f6a","name":"Check: 24Well or Singel or Test","func":"\nif (global.get(\"singlewell\") === false){\n    return [msg, null, null];\n}else if (global.get(\"singlewell\") ===  true){\n    return [null, msg, null];\n}\n","outputs":3,"noerr":0,"initialize":"","finalize":"","x":290,"y":240,"wires":[["5f813a40.c492a4"],["ebbf4ded.783cc"],["625bc8a3.63b5e8"]]},{"id":"ebbf4ded.783cc","type":"function","z":"f9eacf4c.67f6a","name":"Single function","func":"//// init\n// function to create hex\nfunction makehex(num, leng) {\n    intout = leng/2;\n    stringhex = (num).toString(16);\n    stringhex = stringhex.split('');\n    len = stringhex.length;\n    rest = leng - len;\n    zeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\n    stringhexarray = zeroarray.concat(stringhex);\n    var out = []\n    for (z = 1; z <= intout; z++){\n        out.push(parseInt(\"0x\" + stringhexarray[(z*2)-2] + stringhexarray[(z*2)-1]));\n    }\n    return out\n}\n\n// sleep function\nconst sleep = (milliseconds) => {\n  return new Promise(resolve => setTimeout(resolve, milliseconds))\n}\n\n\n// test if bit is set or not\nfunction bit_test(num, bit){\n    return ((num>>bit) % 2 != 0)\n}\n\n// combine hex numbers as decimal to one decimal input: array of decimal hex numbers.\nfunction comphex(array){\n    result = 0\n    for (z = 1; z <= array.length; z++){\n        result = result + (array[z-1]*(Math.pow(256, (array.length-(z)))))\n    }\n    return result;\n}\n\n// function calc temperature\nfunction temper(rawtemp){\n    if (bit_test(rawtemp, 14)){\n        return (rawtemp - 16384)/32;\n    }else{\n        return rawtemp/32;\n    }\n}\n\n// bits needed to add to control register\noutputvoltage = global.get(\"outputvoltage\") || false;\ninputgain = global.get(\"inputgain\") || false;\nvar addtohex = 0;\nif (inputgain && outputvoltage){\n    if (outputvoltage === 2000){\n        addtohex = addtohex + 0\n    }else if (outputvoltage === 1000){\n        addtohex = addtohex + 12\n    }else if (outputvoltage === 200){\n        addtohex = addtohex + 4\n    }else if (outputvoltage === 400){\n        addtohex = addtohex + 8\n    }\n    if (inputgain === 1){\n        addtohex = addtohex + 1\n    }else if(inputgain === 5){\n        addtohex = addtohex + 0\n    }\n}\n\n//get/set variable \nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nstartfreq = global.get(\"startfreq\");\nfreqinc = global.get(\"freqinc\");\ncalibration = global.get(\"calibration\");\npausetime = (global.get(\"pausetime\")||0.0001)*60*1000;\nrepfreq =(global.get(\"repfreq\"))||0;\ngainfactor = global.get(\"gainfactor\");\nphasecorr = (global.get(\"phasecorr\"))||0;\n\n// disable mux\nmsg1.payload = \"init\";\nawait node.send([msg1, null, null, null]);\nawait node.done();\n\n// start sync connection to ad5933\ni2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\n\n// get temperature\ni2c1.writeByteSync(13, 128, makehex(144 + addtohex, 2)[0]);\nwhile (!bit_test(i2c1.readByteSync(13, 143), 0)){\n    if(!global.get(\"stopmeasurement\")){\n        break;\n    }\n    await sleep (0.01);\n}\nvar temp = temper(comphex([i2c1.readByteSync(13, 146), i2c1.readByteSync(13, 147)]));\nif ( temp > 90 ){\n    global.set(\"stopmeasurement\", true);\n}\n\n//// measurement for calibration\nvar calibsingle = [];\nif (calibration){\n    //stand by mode\n    i2c1.writeByteSync(13, 128, makehex(176 + addtohex, 2)[0]);\n    await sleep (500);\n    // start sweep: 32 -> 0010XXXX -> start sweep\n    i2c1.writeByteSync(13, 128, makehex(16 + addtohex, 2)[0]);\n    await sleep (500);\n    i2c1.writeByteSync(13, 128, makehex(32 + addtohex, 2)[0]);\n    // do the sweep\n    k = 0;\n    while(!bit_test(i2c1.readByteSync(13, 143), 2)){\n        while (!bit_test(i2c1.readByteSync(13, 143), 1) || !global.get(\"stopmeasurement\")){\n            await sleep (0.01);\n        }\n        var rawreal = comphex([i2c1.readByteSync(13, 148), i2c1.readByteSync(13, 149)]);\n        var rawimag = comphex([i2c1.readByteSync(13, 150), i2c1.readByteSync(13, 151)]);\n        if (rawimag > 32767) {\n            rawimag = rawimag - 65536\n        }\n        if (rawreal > 32767) {\n            rawreal = rawreal - 65536\n        }\n        var radphase = Math.round(Math.atan2(rawimag, rawreal)*1000000)/1000000;\n        var degphase = Math.round(((radphase * 180/Math.PI) - phasecorr)*100)/100;\n        var rawmagnitude = Math.round(Math.sqrt(Math.pow(rawreal, 2)+Math.pow(rawimag, 2))*1000)/1000\n        var impedance = Math.round((1/(gainfactor * rawmagnitude))*1000)/1000\n        var real = Math.round(impedance * Math.cos(radphase - (phasecorr * Math.PI/180)))\n        var imag = Math.round(impedance * Math.sin(radphase - (phasecorr * Math.PI/180)))\n        calibsingle.push([rawreal, rawimag, rawmagnitude, impedance, real, imag, degphase]);\n        if (global.get(\"nufreqinc\") === 0){\n            break;\n        }\n        k++;\n        i2c1.writeByteSync(13, 128, makehex(48 + addtohex, 2)[0]);\n    }\n}\n\n////Measurement \n//stop time\n//var starttime = 12341234;\n// start sweep: 32 -> 0010XXXX -> start sweep\nv = 1;\nwhile(!global.get(\"stopmeasurement\")){\n    var chartreal = [];\n    var chartimag = [];\n    var chartimpe = [];\n    var chartmagn = [];\n    var chartfreq = [];\n    // get temperature mode\n    i2c1.writeByteSync(13, 128, makehex(144 + addtohex, 2)[0]);\n    while (!bit_test(i2c1.readByteSync(13, 143), 0)){\n        if (global.get(\"stopmeasurement\")){\n            break;\n        }\n        await sleep (0.01);\n    }\n    temp = temper(comphex([i2c1.readByteSync(13, 146), i2c1.readByteSync(13, 147)]));\n    if ( temp > 90 ){\n        global.set(\"stopmeasurement\", true);\n    }\n    //stand by mode\n    i2c1.writeByteSync(13, 128, makehex(176 + addtohex, 2)[0]);\n    await sleep (40);\n    i2c1.writeByteSync(13, 128, makehex(16 + addtohex, 2)[0]);\n    await sleep (40);\n    i2c1.writeByteSync(13, 128, makehex(32 + addtohex, 2)[0]);\n    // do the sweep\n    k = 0;\n    m = 0;\n    while(!bit_test(i2c1.readByteSync(13, 143), 2)){\n        while (!bit_test(i2c1.readByteSync(13, 143), 1)){\n            if (global.get(\"stopmeasurement\")){\n                break;\n            }\n            await sleep (0.1);\n        }\n        if (global.get(\"stopmeasurement\")){\n            break;\n        }\n        var rawreal = comphex([i2c1.readByteSync(13, 148), i2c1.readByteSync(13, 149)]);\n        var rawimag = comphex([i2c1.readByteSync(13, 150), i2c1.readByteSync(13, 151)]);\n        if (rawimag > 32767) {\n            rawimag = rawimag - 65536\n        }\n        if (rawreal > 32767) {\n            rawreal = rawreal - 65536\n        }\n        var radphase = Math.round(Math.atan2(rawimag, rawreal)*1000000)/1000000;\n        var degphase = Math.round(((radphase * 180/Math.PI) - phasecorr)*100)/100;\n        var freqnow = (startfreq+(freqinc*k));\n        var rawmagnitude = Math.round(Math.sqrt(Math.pow(rawreal, 2)+Math.pow(rawimag, 2))*1000)/1000;\n        var impedance = Math.round((1/(gainfactor * rawmagnitude))*1000)/1000;\n        var real = Math.round(impedance * Math.cos(radphase - (phasecorr * Math.PI/180)))\n        var imag = Math.round(impedance * Math.sin(radphase - (phasecorr * Math.PI/180)))\n        msg2.payload = {\"timestamp\": (+new Date() / 1000), \"freq\" : freqnow, \"rawreal\": rawreal, \"rawimag\": rawimag, \"rawmagnitude\": rawmagnitude, \"rawphase\": radphase, \"real\": real, \"imag\": imag,  \"impedance\": impedance, \"degphase\": degphase, \"singlemeas\": true,  \"measurementrun\": v, \"temperature\": temp};\n        if (calibration){\n            rawreal = Math.round(rawreal  - calibsingle[k][0]);\n            rawimag = Math.round(rawimag  - calibsingle[k][1]);\n            msg2.payload.rawcalibreal = rawreal;\n            msg2.payload.rawcalibimag = rawimag;\n            rawmagnitude = Math.round(rawmagnitude - calibsingle[k][2]);\n            msg2.payload.rawcalibmagnitude = rawmagnitude;\n            impedance = Math.round(impedance  - calibsingle[k][3]);\n            msg2.payload.calibimpedance = impedance;\n            real = Math.round(real - calibsingle[k][4]);\n            imag = Math.round(imag - calibsingle[k][5]);\n            msg2.payload.calibreal = real;\n            msg2.payload.calibimag = imag;\n            degphase = Math.round(degphase - calibsingle[k][6]);\n            msg2.payload.calibdegphase = degphase\n        }\n        msg2.topic = \"single\";\n        await node.send([null, msg2, null, null]);\n        await node.done();\n        if (global.get(\"nufreqinc\") === 0){\n            break;\n        }\n        if (m < repfreq){\n            i2c1.writeByteSync(13, 128, makehex(64 + addtohex, 2)[0]);\n            m++;\n        }else{\n            chartreal.push(real);\n            chartimag.push(imag);\n            chartmagn.push(rawmagnitude);\n            chartimpe.push(impedance);\n            chartfreq.push(freqnow);\n            k++;\n            m = 0;\n            i2c1.writeByteSync(13, 128, makehex(48 + addtohex, 2)[0]);\n        }\n    }\n    // send chart data\n    var chart = [{\n    \"series\": [\"Real\",\"Imag\", \"Impe\", \"rawMagn\"],\n    \"data\": [ chartreal, chartimag, chartimpe, chartmagn ],\n    \"labels\": chartfreq,\n    }];\n    msg3.payload = chart;\n    msg3.toplabel = v + \". Single Sample\";\n    msg3.topic = \"single\";\n    await node.send([null, null, msg3, null]);\n    await node.done();\n    //wait for given pausetime\n    for (a = 0; a < Math.round(pausetime/6); a++){\n        if (global.get(\"stopmeasurement\")){\n            break;\n        }\n        await sleep (6);\n    }\n    v++;\n}\n\n//power down mode\ni2c1.writeByteSync(13, 128, makehex(160, 2)[0]);\n\n\n//reset ad5933\n//...\nmsg1.payload = \"init\";\ni2c1.closeSync();\nmsg4.payload = true;\nreturn [msg1,null,null,msg4];","outputs":4,"noerr":0,"initialize":"","finalize":"","x":680,"y":240,"wires":[["51778716.011498"],["d46789b4.bbd428"],["f941f6c4.abd878"],["59e83101.3afc2","a0138e69.bf196"]]},{"id":"625bc8a3.63b5e8","type":"function","z":"f9eacf4c.67f6a","name":"Test function","func":"// measurement for calibration\nvar calibtest = [];\n\n\nreturn msg;","outputs":3,"noerr":0,"initialize":"","finalize":"","x":690,"y":320,"wires":[[],[],[]]},{"id":"98e94112.db40f","type":"comment","z":"f9eacf4c.67f6a","name":"Main measurement functions","info":"","x":140,"y":60,"wires":[]},{"id":"f5337187.35373","type":"link in","z":"f9eacf4c.67f6a","name":"Mux","links":["51778716.011498"],"x":135,"y":700,"wires":[["472a056f.618b3c"]]},{"id":"51778716.011498","type":"link out","z":"f9eacf4c.67f6a","name":"From measurement mux","links":["f5337187.35373"],"x":1035,"y":160,"wires":[]},{"id":"cbff1d5.4b310e","type":"comment","z":"f9eacf4c.67f6a","name":"sets the two 16 chanel mux by well number or test number or init","info":"","x":250,"y":440,"wires":[]},{"id":"2b40fe9f.d40b52","type":"comment","z":"f9eacf4c.67f6a","name":"Calipration","info":"","x":1480,"y":80,"wires":[]},{"id":"4fc89404.bb7dec","type":"comment","z":"f9eacf4c.67f6a","name":"start measerment x times","info":"","x":1530,"y":240,"wires":[]},{"id":"5181bc6a.c24784","type":"comment","z":"f9eacf4c.67f6a","name":"well 1...","info":"","x":1550,"y":280,"wires":[]},{"id":"59c1c08f.b80de","type":"comment","z":"f9eacf4c.67f6a","name":"well 2 ...","info":"","x":1560,"y":680,"wires":[]},{"id":"bbb43768.2ceb28","type":"comment","z":"f9eacf4c.67f6a","name":"well ...","info":"","x":1550,"y":760,"wires":[]},{"id":"422ad741.7c7898","type":"comment","z":"f9eacf4c.67f6a","name":"start sweep","info":"","x":1610,"y":320,"wires":[]},{"id":"e7e5263d.0f9058","type":"comment","z":"f9eacf4c.67f6a","name":"repeat freq x times","info":"","x":1670,"y":360,"wires":[]},{"id":"e71f8485.b92eb8","type":"comment","z":"f9eacf4c.67f6a","name":"measerment save","info":"","x":1710,"y":480,"wires":[]},{"id":"7fa6b0ff.387d5","type":"comment","z":"f9eacf4c.67f6a","name":"Move to next freq","info":"","x":1660,"y":520,"wires":[]},{"id":"10931511.44473b","type":"comment","z":"f9eacf4c.67f6a","name":"close sweep","info":"","x":1610,"y":560,"wires":[]},{"id":"93a053f9.97e2c","type":"comment","z":"f9eacf4c.67f6a","name":"send data or stor as csv","info":"","x":1640,"y":600,"wires":[]},{"id":"c4aef48f.7738b8","type":"comment","z":"f9eacf4c.67f6a","name":"...","info":"","x":1590,"y":720,"wires":[]},{"id":"5976101d.97c3a","type":"comment","z":"f9eacf4c.67f6a","name":"Over all ","info":"","x":1470,"y":800,"wires":[]},{"id":"136a9d1e.510443","type":"comment","z":"f9eacf4c.67f6a","name":"calculations and claipration -> tarra","info":"","x":1760,"y":440,"wires":[]},{"id":"292cd2c7.37c8be","type":"comment","z":"f9eacf4c.67f6a","name":"measerment","info":"","x":1690,"y":400,"wires":[]},{"id":"ff27798a.c32f78","type":"comment","z":"f9eacf4c.67f6a","name":"display to dashboard","info":"","x":1630,"y":640,"wires":[]},{"id":"7e656351.5ee0dc","type":"comment","z":"f9eacf4c.67f6a","name":"schor measerment each well and store it","info":"","x":1620,"y":120,"wires":[]},{"id":"3c0c277b.60ee08","type":"comment","z":"f9eacf4c.67f6a","name":"set parameter repeat frew x times","info":"","x":1590,"y":160,"wires":[]},{"id":"9f0ffbbb.2e2d58","type":"comment","z":"f9eacf4c.67f6a","name":"Maybe pause","info":"","x":1530,"y":200,"wires":[]},{"id":"77149889.f3a0d8","type":"comment","z":"df93d689.dd9628","name":"Set run measurement","info":"","x":720,"y":1140,"wires":[]},{"id":"59e83101.3afc2","type":"link out","z":"f9eacf4c.67f6a","name":"measurement done","links":["52202e43.2acd4","837478a3.78f8a8","7ff59729.4608c8","8c3b62d7.e8ee5","5100e56a.94507c","e872264b.4e2838"],"x":1035,"y":320,"wires":[]},{"id":"2e755dc.832cea2","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":1580,"wires":[["7d364a0f.cb84d4"]]},{"id":"7d364a0f.cb84d4","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":1580,"wires":[["bacd63ce.9d9c8"]]},{"id":"837478a3.78f8a8","type":"link in","z":"ee85905d.ce5be","name":"","links":["59e83101.3afc2"],"x":55,"y":100,"wires":[["b6bdf5e1.6c1c88"]]},{"id":"a0138e69.bf196","type":"change","z":"f9eacf4c.67f6a","name":"","rules":[{"t":"set","p":"ad5933check","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1130,"y":280,"wires":[[]]},{"id":"94830ec7.38e9e","type":"comment","z":"4ee8fc4c.6ba204","name":"Stop Measurement Button","info":"","x":210,"y":40,"wires":[]},{"id":"639c3a.743883c8","type":"function","z":"4ee8fc4c.6ba204","name":"","func":"if(msg.payload === \"OK\"){\n    msg.payload = true;\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":840,"y":80,"wires":[["cd21d19.091493"]]},{"id":"cd21d19.091493","type":"change","z":"4ee8fc4c.6ba204","name":"","rules":[{"t":"set","p":"stopmeasurement","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":80,"wires":[[]]},{"id":"a1bd95ba.916478","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"stopmeasurement","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":1320,"wires":[[]]},{"id":"e239dff5.55a39","type":"function","z":"df93d689.dd9628","name":"","func":"if(msg.payload === \"OK\"){\n    msg.payload = true;\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1360,"y":1360,"wires":[["5b049557.0be08c"]]},{"id":"5b049557.0be08c","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"stopmeasurement","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1630,"y":1360,"wires":[[]]},{"id":"c7f2c3b9.4b4f5","type":"comment","z":"df93d689.dd9628","name":"Set Parameter Dashboard","info":"","x":950,"y":1320,"wires":[]},{"id":"aa8510c2.08c1e","type":"function","z":"4ee8fc4c.6ba204","name":"","func":"msg.payload = [];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":740,"wires":[["990e792d.256038","c017b684.4a25a8","cf46ff6d.c2bfe","4d541661.d94b28","34dbd6aa.65b65a","ccb7b8e7.b35d78","fdc74549.bf8548","7a8a783d.0c6188","e23912cb.069ef","131dbb18.4a1d45","45694569.55befc","e58ca168.0b5bc","6e9114d.1260fec","b07e54a6.86ac18","16da8741.845909","d88cb0fc.77d3e","32984ac5.bf74e6","a2c930b7.81dd3","aa15d36.d63d23","1540037b.3b358d","78706acf.aa0674","edf7df01.a1088","98b9b21a.e3e0a","481b4a7b.622074"]]},{"id":"325c3e67.1110a2","type":"function","z":"4ee8fc4c.6ba204","name":"","func":"if (msg.topic === \"well1\"){\n    return [msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well2\"){\n    return [null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well3\"){\n    return [null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well4\"){\n    return [null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well5\"){\n    return [null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well6\"){\n    return [null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well7\"){\n    return [null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well8\"){\n    return [null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well9\"){\n    return [null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well10\"){\n    return [null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well11\"){\n    return [null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well12\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well13\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well14\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well15\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well16\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well17\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null, null];\n}else if(msg.topic === \"well18\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null, null];\n}else if(msg.topic === \"well19\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null, null];\n}else if(msg.topic === \"well20\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null, null];\n}else if(msg.topic === \"well21\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null, null];\n}else if(msg.topic === \"well22\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null, null];\n}else if(msg.topic === \"well23\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg, null];\n}else if(msg.topic === \"well24\"){\n    return [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, msg];\n}else if(msg.topic === \"single\"){\n    return [msg, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];\n}","outputs":24,"noerr":0,"initialize":"","finalize":"","x":320,"y":520,"wires":[["ccb7b8e7.b35d78"],["34dbd6aa.65b65a"],["4d541661.d94b28"],["cf46ff6d.c2bfe"],["c017b684.4a25a8"],["990e792d.256038"],["fdc74549.bf8548"],["7a8a783d.0c6188"],["e23912cb.069ef"],["131dbb18.4a1d45"],["45694569.55befc"],["e58ca168.0b5bc"],["6e9114d.1260fec"],["b07e54a6.86ac18"],["16da8741.845909"],["d88cb0fc.77d3e"],["32984ac5.bf74e6"],["a2c930b7.81dd3"],["aa15d36.d63d23"],["1540037b.3b358d"],["78706acf.aa0674"],["edf7df01.a1088"],["98b9b21a.e3e0a"],["481b4a7b.622074"]]},{"id":"f941f6c4.abd878","type":"link out","z":"f9eacf4c.67f6a","name":"From Measurement chart","links":["d7f70c63.ba7a5"],"x":1035,"y":240,"wires":[]},{"id":"d7f70c63.ba7a5","type":"link in","z":"4ee8fc4c.6ba204","name":"To Charts","links":["f941f6c4.abd878"],"x":55,"y":520,"wires":[["325c3e67.1110a2"]]},{"id":"8d5b1f1f.3fee2","type":"inject","z":"4ee8fc4c.6ba204","name":"","props":[{"p":"enabled","v":"false","vt":"bool"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payloadType":"str","x":220,"y":160,"wires":[["5627d7e0.bbaff8"]]},{"id":"d6e1da88.f500e8","type":"link in","z":"4ee8fc4c.6ba204","name":"Input, Run Measuerment","links":["4aec1571.e5aefc"],"x":55,"y":80,"wires":[["4aaddd29.31a3c4"]]},{"id":"4aaddd29.31a3c4","type":"change","z":"4ee8fc4c.6ba204","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":80,"wires":[["5627d7e0.bbaff8"]]},{"id":"7ff59729.4608c8","type":"link in","z":"4ee8fc4c.6ba204","name":"","links":["59e83101.3afc2"],"x":55,"y":120,"wires":[["f27f12f1.0840a"]]},{"id":"f27f12f1.0840a","type":"change","z":"4ee8fc4c.6ba204","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":120,"wires":[["5627d7e0.bbaff8"]]},{"id":"863e08c0.5b6958","type":"link in","z":"4ee8fc4c.6ba204","name":"","links":["f7852cd9.de4c7"],"x":55,"y":740,"wires":[["aa8510c2.08c1e"]]},{"id":"ff3c2f2f.d8b5c","type":"comment","z":"4ee8fc4c.6ba204","name":"Charts ","info":"","x":150,"y":300,"wires":[]},{"id":"d46789b4.bbd428","type":"link out","z":"f9eacf4c.67f6a","name":"From Measurement save/send","links":["55569dc6.a4c1b4"],"x":1035,"y":200,"wires":[]},{"id":"55569dc6.a4c1b4","type":"link in","z":"2ce79d0a.1887b2","name":"To save and send","links":["d46789b4.bbd428"],"x":115,"y":220,"wires":[["f15fdf4c.83cc4","5a0e3833.461d68"]]},{"id":"efa4fecb.e46d6","type":"ui_dropdown","z":"ee85905d.ce5be","name":"","label":"multiplier:","tooltip":"","place":"","group":"ffc1aa9d.ac4028","order":6,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"1 x number of settling cycle times","value":1,"type":"num"},{"label":"2 x number of settling cycle times","value":2,"type":"num"},{"label":"4 x number of settling cycle times","value":4,"type":"num"}],"payload":"","topic":"\"\"","x":160,"y":2340,"wires":[["16deb086.d1bc6f","9f391184.62a94","a6608e26.90d41"]]},{"id":"e991c11f.5b2ca","type":"ui_dropdown","z":"ee85905d.ce5be","name":"","label":"Output Voltage Range","tooltip":"","place":"","group":"ffc1aa9d.ac4028","order":7,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"1.0 V p-p","value":1000,"type":"num"},{"label":"2.0 V p-p","value":2000,"type":"num"},{"label":"200 mV p-p","value":200,"type":"num"},{"label":"400 mV p-p","value":400,"type":"num"}],"payload":"","topic":"","x":200,"y":2500,"wires":[["819a59ff.137308"]]},{"id":"23aef615.cd0b6a","type":"ui_dropdown","z":"ee85905d.ce5be","name":"","label":"PGA gain","tooltip":"","place":"","group":"ffc1aa9d.ac4028","order":8,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"x 1","value":1,"type":"num"},{"label":"x 5","value":5,"type":"num"}],"payload":"","topic":"","x":160,"y":2660,"wires":[["cd03d838.c9a318"]]},{"id":"66d6ca48.492a14","type":"ui_dropdown","z":"ee85905d.ce5be","name":"","label":"USB Drive","tooltip":"","place":"","group":"3ad81bc4.ceb334","order":3,"width":0,"height":0,"passthru":true,"multiple":false,"options":[],"payload":"","topic":"","x":670,"y":660,"wires":[["243c1100.104f4","ef3bcf1e.09184"]]},{"id":"def5278.895f7d8","type":"ui_button","z":"ee85905d.ce5be","name":"","group":"94852fe6.33d6c","order":7,"width":4,"height":2,"passthru":false,"label":"Start","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"date","topic":"","x":150,"y":4300,"wires":[["fdc03adf.5811b8"]]},{"id":"e38c9031.7d39e","type":"ui_button","z":"ee85905d.ce5be","name":"","group":"94852fe6.33d6c","order":6,"width":4,"height":2,"passthru":true,"label":"Reset all","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"init","x":140,"y":4140,"wires":[["d6be7fbf.91518"]]},{"id":"5627d7e0.bbaff8","type":"ui_button","z":"4ee8fc4c.6ba204","name":"Stop Measurement","group":"ec5469ff.470da8","order":1,"width":30,"height":1,"passthru":false,"label":"Stop Measurement","tooltip":"","color":"","bgcolor":"orange","icon":"","payload":"Are you sure you want to stop the measurement?","payloadType":"str","topic":"","x":450,"y":80,"wires":[["b15dd657.e60a98"]]},{"id":"aac7d0b.2719a3","type":"ui_button","z":"df93d689.dd9628","name":"Stop Measurement","group":"671ea14d.aec49","order":1,"width":30,"height":1,"passthru":true,"label":"Stop Measurement","tooltip":"","color":"","bgcolor":"orange","icon":"","payload":"Are you sure you want to stop the measurement?","payloadType":"str","topic":"","x":930,"y":1360,"wires":[["120e4013.de9fb"]]},{"id":"e69e3020.744e","type":"ui_switch","z":"ee85905d.ce5be","name":"well1","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":10,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well1","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":3611,"wires":[["f810ddc0.92a13","35bbae19.a10392"]]},{"id":"302b34de.4d5c9c","type":"ui_switch","z":"ee85905d.ce5be","name":"well2","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":11,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well2","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":3671,"wires":[["801f88d3.7e78f8","35bbae19.a10392"]]},{"id":"32f56500.a0401c","type":"ui_switch","z":"ee85905d.ce5be","name":"well3","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":12,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well3","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":3611,"wires":[["374f800f.3e40c","35bbae19.a10392"]]},{"id":"5f4b74bb.cb007c","type":"ui_switch","z":"ee85905d.ce5be","name":"well4","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":13,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well4","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":3671,"wires":[["d2ac4b07.0d2be8","35bbae19.a10392"]]},{"id":"7932d429.a0b26c","type":"ui_switch","z":"ee85905d.ce5be","name":"well5","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":14,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well5","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":3611,"wires":[["3b7ea979.7be556","35bbae19.a10392"]]},{"id":"95eb0bd6.affaa8","type":"ui_switch","z":"ee85905d.ce5be","name":"well6","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":15,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well6","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":3671,"wires":[["56f0d0b6.f0e66","35bbae19.a10392"]]},{"id":"e4464cec.c7f25","type":"ui_switch","z":"ee85905d.ce5be","name":"well7","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":18,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well7","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":3731,"wires":[["e389a6cf.c774d8","35bbae19.a10392"]]},{"id":"bbc26d95.22621","type":"ui_switch","z":"ee85905d.ce5be","name":"well8","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":19,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well8","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":3791,"wires":[["cf2beebf.b3715","35bbae19.a10392"]]},{"id":"56a16812.f42b98","type":"ui_switch","z":"ee85905d.ce5be","name":"well9","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":20,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well9","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":3731,"wires":[["397312b2.d89f1e","35bbae19.a10392"]]},{"id":"ce0a6247.04186","type":"ui_switch","z":"ee85905d.ce5be","name":"well10","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":21,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well10","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":3791,"wires":[["c00710f1.2f53b","35bbae19.a10392"]]},{"id":"da76d6e0.dd8af8","type":"ui_switch","z":"ee85905d.ce5be","name":"well17","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":30,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well17","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":3851,"wires":[["5b42b304.e57a2c","35bbae19.a10392"]]},{"id":"6ca820ff.8b582","type":"ui_switch","z":"ee85905d.ce5be","name":"well18","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":31,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well18","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":3911,"wires":[["e8bb4c21.d7a78","35bbae19.a10392"]]},{"id":"2fde7332.d1de3c","type":"ui_switch","z":"ee85905d.ce5be","name":"well19","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":34,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well19","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":3971,"wires":[["fe2d10e9.c17de","35bbae19.a10392"]]},{"id":"f4513d6e.5a4ce","type":"ui_switch","z":"ee85905d.ce5be","name":"well20","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":35,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well20","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":4031,"wires":[["b28bf770.49f318","35bbae19.a10392"]]},{"id":"a27b3cf4.45c36","type":"ui_switch","z":"ee85905d.ce5be","name":"well21","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":36,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well21","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":3971,"wires":[["2e42854.cb0d47a","35bbae19.a10392"]]},{"id":"ef087572.55b728","type":"ui_switch","z":"ee85905d.ce5be","name":"well22","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":37,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well22","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":4031,"wires":[["920ec01e.2ac52","35bbae19.a10392"]]},{"id":"a33da1dc.fa601","type":"ui_switch","z":"ee85905d.ce5be","name":"well23","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":38,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well23","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":3971,"wires":[["e179d8a5.1f82a8","35bbae19.a10392"]]},{"id":"4fdb092.8b865f8","type":"ui_switch","z":"ee85905d.ce5be","name":"well24","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":39,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well24","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":4031,"wires":[["8103f312.01c2a","35bbae19.a10392"]]},{"id":"11718c0d.38d724","type":"ui_switch","z":"ee85905d.ce5be","name":"well13","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":26,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well13","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":3851,"wires":[["71aa5a59.ad0a54","35bbae19.a10392"]]},{"id":"9a93d930.fbfa98","type":"ui_switch","z":"ee85905d.ce5be","name":"well14","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":27,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well14","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":350,"y":3911,"wires":[["fb58da8b.b70988","35bbae19.a10392"]]},{"id":"b08e7277.2836c","type":"ui_switch","z":"ee85905d.ce5be","name":"well15","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":28,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well15","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":3851,"wires":[["b5360a98.cfb298","35bbae19.a10392"]]},{"id":"79af0ca7.ebb674","type":"ui_switch","z":"ee85905d.ce5be","name":"well16","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":29,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well16","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":630,"y":3911,"wires":[["9e34cfd6.6da94","35bbae19.a10392"]]},{"id":"1ff99827.9e1428","type":"ui_switch","z":"ee85905d.ce5be","name":"well11","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":22,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well11","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":3731,"wires":[["7a7b339e.89c38c","35bbae19.a10392"]]},{"id":"9a8864c3.5d4378","type":"ui_switch","z":"ee85905d.ce5be","name":"well12","label":"switch","tooltip":"","group":"eafb9e57.c0cc7","order":23,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"well12","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":910,"y":3791,"wires":[["a319b276.33bdd","35bbae19.a10392"]]},{"id":"1811abe0.743864","type":"ui_switch","z":"ee85905d.ce5be","name":"","label":"All on or off","tooltip":"","group":"eafb9e57.c0cc7","order":41,"width":8,"height":1,"passthru":true,"decouple":"false","topic":"init","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":170,"y":3831,"wires":[["e69e3020.744e","e4464cec.c7f25","11718c0d.38d724","2fde7332.d1de3c","302b34de.4d5c9c","bbc26d95.22621","9a93d930.fbfa98","f4513d6e.5a4ce","32f56500.a0401c","56a16812.f42b98","b08e7277.2836c","a27b3cf4.45c36","5f4b74bb.cb007c","ce0a6247.04186","79af0ca7.ebb674","ef087572.55b728","7932d429.a0b26c","1ff99827.9e1428","da76d6e0.dd8af8","a33da1dc.fa601","95eb0bd6.affaa8","9a8864c3.5d4378","6ca820ff.8b582","4fdb092.8b865f8"]]},{"id":"7df63116.948fd","type":"ui_switch","z":"ee85905d.ce5be","name":"","label":"24 well or single sample","tooltip":"","group":"3ad81bc4.ceb334","order":6,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":210,"y":1260,"wires":[["70a8ef83.fd8d","ba837647.69bea8","fd45e89e.7e7f08"]]},{"id":"2d777123.7bfe4e","type":"ui_switch","z":"ee85905d.ce5be","name":"","label":"Calibration with first measurement","tooltip":"","group":"3ad81bc4.ceb334","order":5,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":240,"y":1100,"wires":[["53055466.a014fc"]]},{"id":"250ea612.2d6eea","type":"ui_switch","z":"ee85905d.ce5be","name":"","label":"Send over MQTT","tooltip":"","group":"3ad81bc4.ceb334","order":4,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":190,"y":380,"wires":[["4d029ae8.841c64","f18a7681.6312e8"]]},{"id":"daf8a718.f050b8","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"Frequency increment [Hz]; min: 0.1 max: 1000 ","tooltip":"","group":"ffc1aa9d.ac4028","order":2,"width":0,"height":0,"passthru":true,"mode":"number","delay":"700","topic":"","x":280,"y":1860,"wires":[["40cf3a66.6f7d84","a2e51e95.927f3","b5ea890.227b178"]]},{"id":"d148a8ec.8143a8","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"Number of increments; min: 0 max: 511","tooltip":"","group":"ffc1aa9d.ac4028","order":3,"width":0,"height":0,"passthru":true,"mode":"number","delay":"700","topic":"","x":260,"y":1980,"wires":[["94147734.9fafc8","f2073d69.53213","a5de8507.7b2c08"]]},{"id":"7338d780.ee5028","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"Start frequency [kHz]; min: 1 max: 100 ","tooltip":"","group":"ffc1aa9d.ac4028","order":1,"width":0,"height":0,"passthru":true,"mode":"number","delay":"700","topic":"","x":250,"y":1740,"wires":[["70a41f2b.78175","e44094bb.e06128","b9ea7e04.07054"]]},{"id":"5b44ea31.d4b9b4","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"Repeat Frequency; min: 0 max: 20","tooltip":"","group":"ffc1aa9d.ac4028","order":4,"width":0,"height":0,"passthru":true,"mode":"number","delay":"700","topic":"","x":240,"y":2100,"wires":[["b0f4b11b.effc5","9314643.b837298"]]},{"id":"8395c66a.1d37f8","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"Pause between measurements runs [min]; max: 1440","tooltip":"","group":"3ad81bc4.ceb334","order":2,"width":0,"height":0,"passthru":true,"mode":"number","delay":"1000","topic":"","x":300,"y":980,"wires":[["be67c2c5.b0176"]]},{"id":"5ea807b9.8637e8","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"Name of measurement","tooltip":"","group":"3ad81bc4.ceb334","order":1,"width":0,"height":0,"passthru":true,"mode":"text","delay":"0","topic":"","x":200,"y":260,"wires":[["3cdcd81c.53ed78"]]},{"id":"ed1e74b2.3e3598","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"number of settling time cycles; min: 5 max: 511","tooltip":"","group":"ffc1aa9d.ac4028","order":5,"width":0,"height":0,"passthru":true,"mode":"number","delay":"700","topic":"","x":280,"y":2220,"wires":[["68183bba.f88164","e7268097.ab04c","fbedcfa4.425fe"]]},{"id":"d166dddb.717a8","type":"ui_text","z":"ee85905d.ce5be","group":"94852fe6.33d6c","order":2,"width":0,"height":0,"name":"","label":"End frequnecy of sweep [kHz]: ","format":"<font color= {{msg.color}} > {{msg.payload}} </font>","layout":"row-spread","x":1630,"y":1760,"wires":[]},{"id":"8f26fc06.f7d2e","type":"ui_text","z":"ee85905d.ce5be","group":"94852fe6.33d6c","order":3,"width":0,"height":0,"name":"","label":"total settling times cycle","format":"{{msg.payload}}","layout":"row-spread","x":1610,"y":2340,"wires":[]},{"id":"abc17031.7e46a","type":"ui_text","z":"ee85905d.ce5be","group":"94852fe6.33d6c","order":4,"width":0,"height":0,"name":"","label":"One full sweep [s]","format":"<font color= {{msg.color}} > {{msg.payload}} </font>","layout":"row-spread","x":1590,"y":1980,"wires":[]},{"id":"4a6b027b.7b1f1c","type":"ui_text","z":"ee85905d.ce5be","group":"94852fe6.33d6c","order":5,"width":0,"height":0,"name":"","label":"One full measurement run [s]","format":"<font color= {{msg.color}} > {{msg.payload}} </font>","layout":"row-spread","x":1620,"y":2020,"wires":[]},{"id":"82aa1c4.cba6ce","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":2,"width":1,"height":1,"name":"1","label":"","format":"1","layout":"row-spread","x":1230,"y":3640,"wires":[]},{"id":"d9f51d4a.31cbd","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":3,"width":1,"height":1,"name":"2","label":"","format":"2","layout":"row-spread","x":1350,"y":3640,"wires":[]},{"id":"55cedbd9.5eda84","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":4,"width":1,"height":1,"name":"3","label":"","format":"3","layout":"row-spread","x":1470,"y":3640,"wires":[]},{"id":"586689a9.61abd8","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":5,"width":1,"height":1,"name":"4","label":"","format":"4","layout":"row-spread","x":1590,"y":3640,"wires":[]},{"id":"4a38b48f.d787bc","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":6,"width":1,"height":1,"name":"5","label":"","format":"5","layout":"row-spread","x":1710,"y":3640,"wires":[]},{"id":"91808d08.2bf1a","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":33,"width":1,"height":1,"name":"D","label":"","format":"D","layout":"row-spread","x":1710,"y":3680,"wires":[]},{"id":"b92ac0c5.6bfea","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":7,"width":1,"height":1,"name":"6","label":"","format":"6","layout":"row-spread","x":1230,"y":3680,"wires":[]},{"id":"13e14277.82564e","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":9,"width":1,"height":1,"name":"A","label":"","format":"A","layout":"row-spread","x":1350,"y":3680,"wires":[]},{"id":"8dabc44f.327b68","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":17,"width":1,"height":1,"name":"B","label":"","format":"B","layout":"row-spread","x":1470,"y":3680,"wires":[]},{"id":"a7017672.f07d18","type":"ui_text","z":"ee85905d.ce5be","group":"eafb9e57.c0cc7","order":25,"width":1,"height":1,"name":"C","label":"","format":"C","layout":"row-spread","x":1590,"y":3680,"wires":[]},{"id":"b59d5129.79c6d","type":"ui_text","z":"ee85905d.ce5be","group":"94852fe6.33d6c","order":1,"width":0,"height":0,"name":"","label":"Digilent PmodIA AD5933:","format":"<font color= {{msg.color}} > {{msg.payload}} </font>","layout":"row-spread","x":1250,"y":1420,"wires":[]},{"id":"9c5bb3af.bd61a","type":"ui_text","z":"d05d0a8e.8eb938","group":"66cba542.37c96c","order":0,"width":0,"height":0,"name":"","label":"text","format":"asdf","layout":"row-spread","x":640,"y":480,"wires":[]},{"id":"ccb7b8e7.b35d78","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":2,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#e12323","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":570,"y":380,"wires":[[]]},{"id":"34dbd6aa.65b65a","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":3,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fb3235","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":570,"y":420,"wires":[[]]},{"id":"4d541661.d94b28","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":4,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f22c2f","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":570,"y":460,"wires":[[]]},{"id":"cf46ff6d.c2bfe","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":5,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f6314f","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":570,"y":500,"wires":[[]]},{"id":"c017b684.4a25a8","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":6,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f23639","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":570,"y":540,"wires":[[]]},{"id":"990e792d.256038","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":7,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fb2d31","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":570,"y":580,"wires":[[]]},{"id":"fdc74549.bf8548","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":8,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fa3336","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":750,"y":380,"wires":[[]]},{"id":"7a8a783d.0c6188","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":9,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fd2b39","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":750,"y":420,"wires":[[]]},{"id":"e23912cb.069ef","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":10,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fa1919","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":750,"y":460,"wires":[[]]},{"id":"131dbb18.4a1d45","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":11,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f73639","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":750,"y":500,"wires":[[]]},{"id":"45694569.55befc","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":12,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f92444","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":750,"y":540,"wires":[[]]},{"id":"e58ca168.0b5bc","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":13,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f52432","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":750,"y":580,"wires":[[]]},{"id":"6e9114d.1260fec","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":14,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f22626","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":930,"y":380,"wires":[[]]},{"id":"b07e54a6.86ac18","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":15,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f62326","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":930,"y":420,"wires":[[]]},{"id":"16da8741.845909","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":16,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f83030","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":930,"y":460,"wires":[[]]},{"id":"d88cb0fc.77d3e","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":17,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f72b2f","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":930,"y":500,"wires":[[]]},{"id":"32984ac5.bf74e6","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":18,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fb373a","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":930,"y":540,"wires":[[]]},{"id":"a2c930b7.81dd3","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":19,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f72222","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":930,"y":580,"wires":[[]]},{"id":"aa15d36.d63d23","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":20,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fd2137","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1110,"y":380,"wires":[[]]},{"id":"1540037b.3b358d","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":21,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f82525","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1110,"y":420,"wires":[[]]},{"id":"78706acf.aa0674","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":22,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f22634","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1110,"y":460,"wires":[[]]},{"id":"edf7df01.a1088","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":23,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f42a2a","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1110,"y":500,"wires":[[]]},{"id":"98b9b21a.e3e0a","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":24,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#f52443","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1110,"y":540,"wires":[[]]},{"id":"481b4a7b.622074","type":"ui_chart","z":"4ee8fc4c.6ba204","name":"","group":"ec5469ff.470da8","order":25,"width":5,"height":4,"label":"{{msg.toplabel}}","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"511","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"useUTC":false,"colors":["#1f77b4","#fa2e2e","#2ca02c","#c5b0d5","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"outputs":1,"x":1110,"y":580,"wires":[[]]},{"id":"2d99ee8c.4dde42","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":780,"y":1880,"wires":[]},{"id":"f8a0437c.00dc1","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":780,"y":2000,"wires":[]},{"id":"c9d5cd94.c834","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":780,"y":1760,"wires":[]},{"id":"44a73df1.73fc24","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":780,"y":2240,"wires":[]},{"id":"ab5c0882.2cf0a8","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":780,"y":2120,"wires":[]},{"id":"ded2a5c6.62acc8","type":"ui_toast","z":"ee85905d.ce5be","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":870,"y":980,"wires":[["3051c569.f5a38a"]]},{"id":"5549acf.3b94154","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":650,"y":280,"wires":[]},{"id":"28f37403.59d7cc","type":"ui_toast","z":"ee85905d.ce5be","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":650,"y":420,"wires":[["21f94d6d.d856d2"]]},{"id":"b80ee7bf.028498","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":680,"y":540,"wires":[]},{"id":"485cbd29.2904e4","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1180,"y":840,"wires":[]},{"id":"aada6df0.b6fdb","type":"ui_toast","z":"ee85905d.ce5be","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"Cancel","raw":true,"topic":"Confirm input made","name":"Confirm input made","x":650,"y":4540,"wires":[["7fc06f39.9d199"]]},{"id":"4b0b4786.4c35e8","type":"ui_toast","z":"ee85905d.ce5be","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"somthin not ok","x":640,"y":4380,"wires":[[]]},{"id":"8b0dd50.1329a28","type":"ui_toast","z":"df93d689.dd9628","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1130,"y":1680,"wires":[[]]},{"id":"b15dd657.e60a98","type":"ui_toast","z":"4ee8fc4c.6ba204","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"Cancel","raw":false,"topic":"","name":"","x":650,"y":80,"wires":[["639c3a.743883c8"]]},{"id":"120e4013.de9fb","type":"ui_toast","z":"df93d689.dd9628","position":"dialog","displayTime":"3","highlight":"","sendall":true,"outputs":1,"ok":"OK","cancel":"Cancel","raw":false,"topic":"","name":"","x":1170,"y":1360,"wires":[["e239dff5.55a39"]]},{"id":"420edb6b.1e3904","type":"ui_ui_control","z":"ee85905d.ce5be","name":"","events":"all","x":740,"y":1300,"wires":[[]]},{"id":"30cf912d.8e2d4e","type":"ui_ui_control","z":"ee85905d.ce5be","name":"","events":"all","x":820,"y":80,"wires":[[]]},{"id":"c8b91907.99bef8","type":"ui_ui_control","z":"df93d689.dd9628","name":"","events":"all","x":900,"y":1240,"wires":[[]]},{"id":"37752917.0570d6","type":"ui_template","z":"df93d689.dd9628","group":"671ea14d.aec49","name":"","order":0,"width":"30","height":"30","format":"msg.payload","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":900,"y":1400,"wires":[[]]},{"id":"496b44db.53016c","type":"mqtt-check","z":"ee85905d.ce5be","host":"localhost","port":"1883","username":"","password":"","name":"","x":660,"y":380,"wires":[["65c7810e.960d3"]]},{"id":"d56cffe0.0c764","type":"i2c in","z":"ee85905d.ce5be","name":"","busno":"1","address":"13","command":"143","count":"1","x":150,"y":1420,"wires":[["7ffcd247.aade7c"]]},{"id":"e6b4c6ba.4413a8","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"130","count":"1","x":1310,"y":140,"wires":[["7d489dc9.58f414"]]},{"id":"9d65d21c.ddcee","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"131","count":"1","x":1310,"y":180,"wires":[["c7a0f678.bf5438"]]},{"id":"58bd1630.00b748","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"132","count":"1","x":1310,"y":220,"wires":[["e24bdabe.683648"]]},{"id":"b9ac677a.09d038","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"133","count":"1","x":1310,"y":340,"wires":[["1bfc1ffd.55b7e"]]},{"id":"69d90e96.f20e2","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"134","count":"1","x":1310,"y":380,"wires":[["e9c3ea13.b690a8"]]},{"id":"d4885e0a.26372","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"135","count":"1","x":1310,"y":420,"wires":[["8b30c2ab.a4729"]]},{"id":"288710d8.b6e2","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"136","count":"1","x":1310,"y":540,"wires":[["191e48e4.532be7"]]},{"id":"5ab2f64e.faaba8","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"137","count":"1","x":1310,"y":580,"wires":[["bbd35d2d.9481a"]]},{"id":"8a49c6f7.e822b8","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"138","count":"1","x":1310,"y":700,"wires":[["690f25ab.27377c"]]},{"id":"74962686.921008","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"139","count":"1","x":1310,"y":740,"wires":[["9d923990.f0e278"]]},{"id":"26ed40c7.e2f9e","type":"i2c in","z":"df93d689.dd9628","name":"checkwrite","busno":"1","address":"13","command":"128","count":"1","x":1310,"y":860,"wires":[["58377427.73aa9c"]]},{"id":"35616c71.576504","type":"comment","z":"2ce79d0a.1887b2","name":"send via mqtt","info":"","x":350,"y":100,"wires":[]},{"id":"bf352881.2df278","type":"function","z":"2ce79d0a.1887b2","name":"","func":"//msg.topic = \"sensorbase/measurements/\" + global.get(\"name\") +\"/\" + msg.topic;\nmsg.topic = \"sensorbase/measurements/\" + global.get(\"name\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":540,"y":160,"wires":[["665461ab.ccec9"]]},{"id":"870aec52.6335a","type":"mqtt out","z":"2ce79d0a.1887b2","name":"","topic":"","qos":"","retain":"","broker":"1ecd3a9e.dc5bfd","x":1070,"y":160,"wires":[]},{"id":"df4fc788.acfdf8","type":"json","z":"2ce79d0a.1887b2","name":"","property":"payload","action":"","pretty":false,"x":890,"y":160,"wires":[["870aec52.6335a"]]},{"id":"f15fdf4c.83cc4","type":"switch","z":"2ce79d0a.1887b2","name":"","property":"mqtt","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":160,"wires":[["bf352881.2df278"]]},{"id":"18ad022c.dbedce","type":"comment","z":"2ce79d0a.1887b2","name":"store one USB drive","info":"","x":370,"y":220,"wires":[]},{"id":"8f7bbc15.bc2ba","type":"csv","z":"2ce79d0a.1887b2","name":"","sep":",","hdrin":"","hdrout":"once","multi":"one","ret":"\\n","temp":"","skip":"0","strings":false,"include_empty_strings":false,"include_null_values":false,"x":730,"y":280,"wires":[["93945e26.d4c3c"]]},{"id":"5a0e3833.461d68","type":"function","z":"2ce79d0a.1887b2","name":"","func":"if (global.get(\"usbdrive\") !== false){\n    msg.filename = \"/home/pi/mnt/Impanalyser/\" + global.get(\"name\") +\".csv\"\nreturn msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":360,"y":280,"wires":[["8f7bbc15.bc2ba"]]},{"id":"68f30414.4f8c5c","type":"change","z":"2ce79d0a.1887b2","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":360,"wires":[["8f7bbc15.bc2ba"]]},{"id":"2b4e72a.b38528e","type":"link in","z":"2ce79d0a.1887b2","name":"","links":["f7852cd9.de4c7"],"x":115,"y":360,"wires":[["68f30414.4f8c5c","e22c919c.00479"]]},{"id":"226084b5.e04d2c","type":"link out","z":"ee85905d.ce5be","name":"from measurement name","links":["f929af64.3b9ee"],"x":575,"y":180,"wires":[]},{"id":"f929af64.3b9ee","type":"link in","z":"2ce79d0a.1887b2","name":"","links":["226084b5.e04d2c"],"x":115,"y":320,"wires":[["6fec99f1.618158"]]},{"id":"255f8519.22f83a","type":"change","z":"2ce79d0a.1887b2","name":"","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":320,"wires":[["8f7bbc15.bc2ba"]]},{"id":"6fec99f1.618158","type":"rbe","z":"2ce79d0a.1887b2","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":350,"y":320,"wires":[["255f8519.22f83a"]]},{"id":"93945e26.d4c3c","type":"file","z":"2ce79d0a.1887b2","name":"","filename":"","appendNewline":false,"createDir":true,"overwriteFile":"false","encoding":"none","x":890,"y":280,"wires":[[]]},{"id":"8adf382b.8ee9f8","type":"function","z":"df93d689.dd9628","name":"maunt usb ","func":"if (global.get(\"usbdrive\")){\n    msg.payload = \"sudo mount \"+global.get(\"usbdrive\")+\" /home/pi/mnt -o uid=pi,gid=pi\";\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":650,"y":1460,"wires":[["5fd2ee91.f0f57"]]},{"id":"5fd2ee91.f0f57","type":"exec","z":"df93d689.dd9628","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":910,"y":1460,"wires":[[],[],[]]},{"id":"312fe8f.beb2118","type":"function","z":"df93d689.dd9628","name":"check if usb","func":"if (global.get(\"usbdrive\") !== false){\nreturn msg;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","x":370,"y":1460,"wires":[["8adf382b.8ee9f8"]]},{"id":"59b439e6.df69c8","type":"change","z":"df93d689.dd9628","name":"","rules":[{"t":"set","p":"stopmeasurement","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1190,"y":1760,"wires":[[]]},{"id":"2f901d22.d94de2","type":"delay","z":"df93d689.dd9628","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":880,"y":1760,"wires":[["59b439e6.df69c8"]]},{"id":"a7a0c79b.a9b228","type":"function","z":"2ce79d0a.1887b2","name":"","func":"\nmsg.payload = \"sudo umount /home/pi/mnt\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":540,"y":400,"wires":[["36596100.1f55e"]]},{"id":"36596100.1f55e","type":"exec","z":"2ce79d0a.1887b2","command":"","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":730,"y":400,"wires":[[],[],[]]},{"id":"e872264b.4e2838","type":"link in","z":"2ce79d0a.1887b2","name":"","links":["59e83101.3afc2"],"x":115,"y":400,"wires":[["e22c919c.00479"]]},{"id":"e22c919c.00479","type":"delay","z":"2ce79d0a.1887b2","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":380,"y":400,"wires":[["a7a0c79b.a9b228"]]},{"id":"fd05c00.616864","type":"inject","z":"d05d0a8e.8eb938","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":270,"y":280,"wires":[["2847b4a1.50950c"]]},{"id":"2847b4a1.50950c","type":"function","z":"d05d0a8e.8eb938","name":"Single function","func":"//// init\n// function to create hex\nfunction makehex(num, leng) {\n    intout = leng/2;\n    stringhex = (num).toString(16);\n    stringhex = stringhex.split('');\n    len = stringhex.length;\n    rest = leng - len;\n    zeroarray = Array.apply(null, new Array(rest)).map(String.prototype.valueOf, \"0\");\n    stringhexarray = zeroarray.concat(stringhex);\n    var out = []\n    for (z = 1; z <= intout; z++){\n        out.push(parseInt(\"0x\" + stringhexarray[(z*2)-2] + stringhexarray[(z*2)-1]));\n    }\n    return out\n}\n\n// sleep function\nconst sleep = (milliseconds) => {\n  return new Promise(resolve => setTimeout(resolve, milliseconds))\n}\n\n\n// test if bit is set or not\nfunction bit_test(num, bit){\n    return ((num>>bit) % 2 != 0)\n}\n\n// combine hex numbers as decimal to one decimal input: array of decimal hex numbers.\nfunction comphex(array){\n    result = 0\n    for (z = 1; z <= array.length; z++){\n        result = result + (array[z-1]*(Math.pow(256, (array.length-(z)))))\n    }\n    return result;\n}\n\n// bits needed to add to control register\noutputvoltage = global.get(\"outputvoltage\") || false;\ninputgain = global.get(\"inputgain\") || false;\nvar addtohex = 0;\nif (inputgain && outputvoltage){\n    if (outputvoltage === 2000){\n        addtohex = addtohex + 0\n    }else if (outputvoltage === 1000){\n        addtohex = addtohex + 12\n    }else if (outputvoltage === 200){\n        addtohex = addtohex + 4\n    }else if (outputvoltage === 400){\n        addtohex = addtohex + 8\n    }\n    if (inputgain === 1){\n        addtohex = addtohex + 1\n    }else if(inputgain === 5){\n        addtohex = addtohex + 0\n    }\n}\n\n//get/set variable \nvar msg1 = {};\nvar msg2 = {};\nvar msg3 = {};\nvar msg4 = {};\nstartfreq = global.get(\"startfreq\");\nfreqinc = global.get(\"freqinc\");\ncalibration = global.get(\"calibration\");\npausetime = (global.get(\"pausetime\")||0.0001)*60*1000;\nrepfreq =(global.get(\"repfreq\"))||0;\n\n// disable mux\nmsg1.payload = \"init\";\nawait node.send([msg1, null, null, null]);\nawait node.done();\n\n// start sync connection to ad5933\ni2c = global.get('ic');\nconst i2c1 = i2c.openSync(1);\n\n\n//power down mode\ni2c1.writeByteSync(13, 128, makehex(176 + addtohex, 2)[0]);\nawait sleep (10)\ni2c1.writeByteSync(13, 128, makehex(144 + addtohex, 2)[0]);\nt = 0;\nwhile (!bit_test(i2c1.readByteSync(13, 143), 0) || t < 1){\n    await sleep (0.01);\n    t++;\n}\nvar rawtemp = comphex([i2c1.readByteSync(13, 146), i2c1.readByteSync(13, 147)]);\nvar temp = 0;\nif (bit_test(rawtemp, 14)){\n    temp = (rawtemp - 16384)/32;\n}else{\n    temp = rawtemp/32;\n}\n//reset ad5933\n//...\nmsg1.payload = \"init\";\nmsg2.payload = temp;\ni2c1.closeSync();\nreturn [msg1,msg2,null,null];","outputs":4,"noerr":0,"initialize":"","finalize":"","x":500,"y":320,"wires":[["5214f6d7.3ac2d8"],["865c844e.6546b8"],[],[]]},{"id":"5214f6d7.3ac2d8","type":"debug","z":"d05d0a8e.8eb938","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":740,"y":120,"wires":[]},{"id":"865c844e.6546b8","type":"debug","z":"d05d0a8e.8eb938","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":880,"y":280,"wires":[]},{"id":"70a2b74d.e7fd08","type":"comment","z":"ee85905d.ce5be","name":"Gain Faktor","info":"","x":170,"y":2940,"wires":[]},{"id":"39aa089f.b9cb88","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\n    if (msg.payload < 2e-12){\n        msg1.payload = \"Gain factor is to small check your calculations!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n    }else if (msg.payload > 1e-3){\n        msg1.payload = \"Gain factor is to big!\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n    }else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n        }else{\n            msg2.payload = msg.payload;\n            return [msg2, null];\n        }\n    }\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":580,"y":2980,"wires":[["cb09f904.37bab8"],["22a5fb7f.00aa04","6bbc5132.d3f74"]]},{"id":"cb09f904.37bab8","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"gainfactor","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":2940,"wires":[[]]},{"id":"6bbc5132.d3f74","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":940,"y":2980,"wires":[["1bdd09ec.f497a6"]]},{"id":"8669144e.336f58","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":2980,"wires":[["1bdd09ec.f497a6"]]},{"id":"1bdd09ec.f497a6","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"Gain factor min: 1e-12 max: 1e-3, e.g.: 515.1e-11","tooltip":"","group":"ffc1aa9d.ac4028","order":9,"width":0,"height":0,"passthru":true,"mode":"number","delay":"2000","topic":"","x":290,"y":2980,"wires":[["39aa089f.b9cb88"]]},{"id":"22a5fb7f.00aa04","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":780,"y":3000,"wires":[]},{"id":"d0ec1100.bae4d","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"feedbackres","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":2820,"wires":[[]]},{"id":"f0962f36.520b3","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":2880,"wires":[["55191eeb.71489"]]},{"id":"55191eeb.71489","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"20","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":2880,"wires":[["3482e322.e67d6c"]]},{"id":"3482e322.e67d6c","type":"ui_dropdown","z":"ee85905d.ce5be","name":"","label":"FeedbackRes","tooltip":"","place":"","group":"ffc1aa9d.ac4028","order":8,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"20 Ohm","value":20,"type":"num"},{"label":"100k Ohm","value":100000,"type":"num"}],"payload":"","topic":"","x":180,"y":2820,"wires":[["d0ec1100.bae4d","ed0599d4.b6e958"]]},{"id":"2aefea12.286266","type":"comment","z":"ee85905d.ce5be","name":"Feddback resistor","info":"","x":190,"y":2780,"wires":[]},{"id":"44e53082.5e603","type":"rpi-gpio out","z":"ee85905d.ce5be","name":"Pin 7:","pin":"7","set":true,"level":"1","freq":"","out":"out","x":650,"y":2860,"wires":[]},{"id":"548a010d.e49a1","type":"comment","z":"ee85905d.ce5be","name":"Phase correction","info":"","x":180,"y":3060,"wires":[]},{"id":"73af7da0.ec92b4","type":"function","z":"ee85905d.ce5be","name":"","func":"var msg1 = {};\nvar msg2 = {};\nif (msg.topic !== \"init\"){\n    if (msg.payload < -180){\n        msg1.payload = \"Phase correction value is to low\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n    }else if (msg.payload > 180){\n        msg1.payload = \"Phase correction value is to high\";\n        msg2.payload = undefined;\n        return [msg2, msg1];\n    }else {\n        if (msg.payload === null){\n            msg2.payload = undefined;\n            return [msg2, null];\n        }else{\n            msg2.payload = Math.round(msg.payload*1000)/1000;\n            return [msg2, null];\n        }\n    }\n}else{\n    msg2.payload = undefined;\n    return [msg2, null];\n}\n","outputs":2,"noerr":0,"initialize":"","finalize":"","x":580,"y":3100,"wires":[["85383b44.b57088"],["a30b37b7.9e8a08","eb40ac3b.c3e2b"]]},{"id":"85383b44.b57088","type":"change","z":"ee85905d.ce5be","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"phasecorr","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":780,"y":3060,"wires":[[]]},{"id":"eb40ac3b.c3e2b","type":"function","z":"ee85905d.ce5be","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":940,"y":3100,"wires":[["225daf28.b40dc"]]},{"id":"5af66e69.c2a5b","type":"link in","z":"ee85905d.ce5be","name":"","links":["f7852cd9.de4c7"],"x":55,"y":3100,"wires":[["225daf28.b40dc"]]},{"id":"225daf28.b40dc","type":"ui_text_input","z":"ee85905d.ce5be","name":"","label":"phase correction min: -180deg, max: 180deg","tooltip":"","group":"ffc1aa9d.ac4028","order":9,"width":0,"height":0,"passthru":true,"mode":"number","delay":"2000","topic":"","x":270,"y":3100,"wires":[["73af7da0.ec92b4"]]},{"id":"a30b37b7.9e8a08","type":"ui_toast","z":"ee85905d.ce5be","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":780,"y":3120,"wires":[]},{"id":"ed0599d4.b6e958","type":"function","z":"ee85905d.ce5be","name":"","func":"if(msg.payload === 20) {\n    msg.payload = 1\n}else if (msg.payload === 100000){\n    msg.payload = 0\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":460,"y":2860,"wires":[["44e53082.5e603"]]},{"id":"904b8718.e0ea58","type":"inject","z":"f9eacf4c.67f6a","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"well1","payload":"well2","payloadType":"str","x":110,"y":760,"wires":[["472a056f.618b3c"]]},{"id":"665461ab.ccec9","type":"join","z":"2ce79d0a.1887b2","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"2","count":"500","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":730,"y":160,"wires":[["df4fc788.acfdf8"]]}]
